function plusSlides(t,e){return showSlides(indexMap[e]+=t,e)}function currentSlide(t,e){return showSlides(indexMap[e]=t,e)}function showSlides(t,e){return Promise.try(function(){var n,i=indexMap[e],o=document.getElementById(e),r=o.getElementsByClassName("mySlides"),a=o.getElementsByClassName("dot");for(t>r.length&&(i=1),1>t&&(i=r.length),n=0;n<r.length;n++)r[n].style.display="none";for(n=0;n<a.length;n++)a[n]&&(a[n].className=a[n].className.replace(" active",""));r[i-1].style.display="block";var s=$(r[i-1].getElementsByTagName("img")[0]);s.attr("src",s.attr("lagy")),a[i-1]&&(a[i-1].className+=" active"),$("#"+e).find(".current").html(i),indexMap[e]=i})}!function(t){"use strict";function e(e,n){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container);var i=(this.inputSize<3?3:this.inputSize)+"em";this.$input.get(0).style.cssText="width: "+i+" !important;",this.build(n)}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function o(t){return t?l.text(t).html():""}function r(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}function a(e,n){var i=!1;return t.each(n,function(t,n){if("number"==typeof n&&e.which===n)return i=!0,!1;if(e.which===n.which){var o=!n.hasOwnProperty("altKey")||e.altKey===n.altKey,r=!n.hasOwnProperty("shiftKey")||e.shiftKey===n.shiftKey,a=!n.hasOwnProperty("ctrlKey")||e.ctrlKey===n.ctrlKey;if(o&&r&&a)return i=!0,!1}}),i}var s={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};e.prototype={constructor:e,add:function(e,n){var i=this;if(!(i.options.maxTags&&i.itemsArray.length>=i.options.maxTags||e!==!1&&!e)){if("string"==typeof e&&i.options.trimValue&&(e=t.trim(e)),"object"==typeof e&&!i.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(i.isSelect&&!i.multiple&&i.itemsArray.length>0&&i.remove(i.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var r=e.split(",");if(r.length>1){for(var a=0;a<r.length;a++)this.add(r[a],!0);return void(n||i.pushVal())}}var s=i.options.itemValue(e),l=i.options.itemText(e),c=i.options.tagClass(e),u=t.grep(i.itemsArray,function(t){return i.options.itemValue(t)===s})[0];if(!u||i.options.allowDuplicates){if(!(i.items().toString().length+e.length+1>i.options.maxInputLength)){var h=t.Event("beforeItemAdd",{item:e,cancel:!1});if(i.$element.trigger(h),!h.cancel){i.itemsArray.push(e);var d=t('<span class="tag '+o(c)+'">'+o(l)+'<span data-role="remove"></span></span>');if(d.data("item",e),i.findInputWrapper().before(d),d.after(" "),i.isSelect&&!t('option[value="'+encodeURIComponent(s)+'"]',i.$element)[0]){var p=t("<option selected>"+o(l)+"</option>");p.data("item",e),p.attr("value",s),i.$element.append(p)}n||i.pushVal(),(i.options.maxTags===i.itemsArray.length||i.items().toString().length===i.options.maxInputLength)&&i.$container.addClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemAdded",{item:e}))}}}else if(i.options.onTagExists){var f=t(".tag",i.$container).filter(function(){return t(this).data("item")===u});i.options.onTagExists(e,f)}}}},remove:function(e,n){var i=this;if(i.objectItems&&(e="object"==typeof e?t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==i.options.itemValue(e)}):t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==e}),e=e[e.length-1]),e){var o=t.Event("beforeItemRemove",{item:e,cancel:!1});if(i.$element.trigger(o),o.cancel)return;t(".tag",i.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",i.$element).filter(function(){return t(this).data("item")===e}).remove(),-1!==t.inArray(e,i.itemsArray)&&i.itemsArray.splice(t.inArray(e,i.itemsArray),1)}n||i.pushVal(),i.options.maxTags>i.itemsArray.length&&i.$container.removeClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),r=e.options.itemValue(i),a=e.options.itemText(i),s=e.options.tagClass(i);if(n.attr("class",null),n.addClass("tag "+o(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o(a),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===i});l.attr("value",r)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(n,!0).trigger("change")},build:function(e){var o=this;if(o.options=t.extend({},s,e),o.objectItems&&(o.options.freeInput=!1),n(o.options,"itemValue"),n(o.options,"itemText"),i(o.options,"tagClass"),o.options.typeahead){var l=o.options.typeahead||{};i(l,"source"),o.$input.typeahead(t.extend({},l,{source:function(e,n){function i(t){for(var e=[],i=0;i<t.length;i++){var a=o.options.itemText(t[i]);r[a]=t[i],e.push(a)}n(e)}this.map={};var r=this.map,a=l.source(e);t.isFunction(a.success)?a.success(i):t.isFunction(a.then)?a.then(i):t.when(a).then(i)},updater:function(t){o.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}}))}if(o.options.typeaheadjs){var c=o.options.typeaheadjs||{};o.$input.typeahead(null,c).on("typeahead:selected",t.proxy(function(t,e){o.add(c.valueKey?e[c.valueKey]:e),o.$input.typeahead("val","")},o))}o.$container.on("click",t.proxy(function(){o.$element.attr("disabled")||o.$input.removeAttr("disabled"),o.$input.focus()},o)),o.options.addOnBlur&&o.options.freeInput&&o.$input.on("focusout",t.proxy(function(){0===t(".typeahead, .twitter-typeahead",o.$container).length&&(o.add(o.$input.val()),o.$input.val(""))},o)),o.$container.on("keydown","input",t.proxy(function(e){var n=t(e.target),i=o.findInputWrapper();if(o.$element.attr("disabled"))return void o.$input.attr("disabled","disabled");switch(e.which){case 8:if(0===r(n[0])){var a=i.prev();a&&o.remove(a.data("item"))}break;case 46:if(0===r(n[0])){var s=i.next();s&&o.remove(s.data("item"))}break;case 37:var l=i.prev();0===n.val().length&&l[0]&&(l.before(i),n.focus());break;case 39:var c=i.next();0===n.val().length&&c[0]&&(c.after(i),n.focus())}var u=n.val().length;Math.ceil(u/5),n.attr("size",Math.max(this.inputSize,n.val().length))},o)),o.$container.on("keypress","input",t.proxy(function(e){var n=t(e.target);if(o.$element.attr("disabled"))return void o.$input.attr("disabled","disabled");var i=n.val(),r=o.options.maxChars&&i.length>=o.options.maxChars;o.options.freeInput&&(a(e,o.options.confirmKeys)||r)&&(o.add(r?i.substr(0,o.options.maxChars):i),n.val(""),e.preventDefault());var s=n.val().length;Math.ceil(s/5),n.attr("size",Math.max(this.inputSize,n.val().length))},o)),o.$container.on("click","[data-role=remove]",t.proxy(function(e){o.$element.attr("disabled")||o.remove(t(e.target).closest(".tag").data("item"))},o)),o.options.itemValue===s.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):t("option",o.$element).each(function(){o.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(n,i){var o=[];return this.each(function(){var r=t(this).data("tagsinput");if(r)if(n||i){if(void 0!==r[n]){var a=r[n](i);void 0!==a&&o.push(a)}}else o.push(r);else r=new e(this,n),t(this).data("tagsinput",r),o.push(r),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof n?o.length>1?o:o[0]:o},t.fn.tagsinput.Constructor=e;var l=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,n,i,o,r={},a=function(){},s=function(t,e){var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},l=function(){clearTimeout(n),n=setTimeout(r.render,i)};return r.init=function(n){n=n||{};var s=n.offset||0,c=n.offsetVertical||s,u=n.offsetHorizontal||s,h=function(t,e){return parseInt(t||e,10)};e={t:h(n.offsetTop,c),b:h(n.offsetBottom,c),l:h(n.offsetLeft,u),r:h(n.offsetRight,u)},i=h(n.throttle,250),o=!!n.unload,a=n.callback||a,r.render(),document.addEventListener?(t.addEventListener("scroll",l,!1),t.addEventListener("load",l,!1)):(t.attachEvent("onscroll",l),t.attachEvent("onload",l))},r.render=function(){for(var n,i,l=document.querySelectorAll("img[data-echo]"),c=l.length,u={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},h=0;c>h;h++)i=l[h],s(i,u)?(o&&i.setAttribute("data-echo-placeholder",i.src),i.src=i.getAttribute("data-echo"),o||i.removeAttribute("data-echo"),a(i,"load")):o&&(n=i.getAttribute("data-echo-placeholder"))&&(i.src=n,i.removeAttribute("data-echo-placeholder"),a(i,"unload"));c||r.detach()},r.detach=function(){document.removeEventListener?t.removeEventListener("scroll",l):t.detachEvent("onscroll",l),clearTimeout(n)},r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){var e=0,n=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{i=t._data(o,"events"),i&&i.remove&&t(o).triggerHandler("remove")}catch(a){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var o,r,a,s,l={},c=e.split(".")[0];return e=e.split(".")[1],o=c+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},r=t[c][e],a=t[c][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new a(t,e)},t.extend(a,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}(),void 0):(l[e]=i,void 0)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||e:e},l,{constructor:a,namespace:c,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete r._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,o,r=n.call(arguments,1),a=0,s=r.length;s>a;a++)for(i in r[a])o=r[a][i],r[a].hasOwnProperty(i)&&void 0!==o&&(e[i]=t.isPlainObject(o)?t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):o);return e},t.widget.bridge=function(e,i){var o=i.prototype.widgetFullName||e;t.fn[e]=function(r){var a="string"==typeof r,s=n.call(arguments,1),l=this;return a?this.each(function(){var n,i=t.data(this,o);return"instance"===r?(l=i,!1):i?t.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,s),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):(s.length&&(r=t.widget.extend.apply(null,[r].concat(s))),this.each(function(){var e=t.data(this,o);e?(e.option(r||{}),e._init&&e._init()):t.data(this,o,new i(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,o,r,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(o=a[e]=t.widget.extend({},this.options[e]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(e=i.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,a){function s(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,s):n.bind(c,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var o,r,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var a,s=o?o===!0||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),a=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),a&&t.effects&&t.effects.effect[s]?i[e](o):s!==e&&i[s]?i[s](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}});t.widget}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):"object"==typeof exports?t(require("jquery"),require("./vendor/jquery.ui.widget")):t(window.jQuery)}(function(t){"use strict";function e(e){var n="dragover"===e;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var o=i.dataTransfer;o&&-1!==t.inArray("Files",o.types)&&this._trigger(e,t.Event(e,{delegatedEvent:i}))!==!1&&(i.preventDefault(),n&&(o.dropEffect="copy"))}}t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,n){return e=this.messages[e]||e.toString(),n&&t.each(n,function(t,n){e=e.replace("{"+t+"}",n)}),e},formData:function(t){return t.serializeArray()},add:function(e,n){return e.isDefaultPrevented()?!1:((n.autoUpload||n.autoUpload!==!1&&t(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}),void 0)},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var i=t-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(e-this.loaded)*(1e3/i)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(n=[],t.each(e.formData,function(t,e){n.push({name:t,value:e})}),n):[]},_getTotal:function(e){var n=0;return t.each(e,function(t,e){n+=e.size||1}),n},_initProgressObject:function(e){var n={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,n):e._progress=n},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,n){if(e.lengthComputable){var i,o=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&o-n._time<n.progressInterval&&e.loaded!==e.total)return;n._time=o,i=Math.floor(e.loaded/e.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(o,i,n.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),n),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var n=this,i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable,t.loaded=i.loaded,t.total=i.total,n._onProgress(t,e)}),e.xhr=function(){return i})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var n,i=this,o=e.files[0],r=e.multipart||!t.support.xhrFileUpload,a="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),r&&!e.blob&&this._isInstanceOf("File",o)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"'),r?t.support.xhrFormDataFileUpload&&(e.postMessage?(n=this._getFormData(e),e.blob?n.push({name:a,value:e.blob}):t.each(e.files,function(i,o){n.push({name:"array"===t.type(e.paramName)&&e.paramName[i]||a,value:o})})):(i._isInstanceOf("FormData",e.formData)?n=e.formData:(n=new FormData,t.each(this._getFormData(e),function(t,e){n.append(e.name,e.value)})),e.blob?n.append(a,e.blob,o.name):t.each(e.files,function(o,r){(i._isInstanceOf("File",r)||i._isInstanceOf("Blob",r))&&n.append("array"===t.type(e.paramName)&&e.paramName[o]||a,r,r.uploadName||r.name)})),e.data=n):(e.contentType=o.type||"application/octet-stream",e.data=e.blob||o),e.blob=null},_initIframeSettings:function(e){var n=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&n&&n!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var n=t(e.fileInput),i=e.paramName;return i?t.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var e=t(this),n=e.prop("name")||"files[]",o=(e.prop("files")||[1]).length;o;)i.push(n),o-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,i){var o=t.Deferred(),r=o.promise();return n=n||this.options.context||r,e===!0?o.resolveWith(n,i):e===!1&&o.rejectWith(n,i),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(e,n){var i=this,o=function(e){return t.Deferred().resolveWith(i,e).promise()};n.process=function(e,r){return(e||r)&&(n._processQueue=this._processQueue=(this._processQueue||o([this])).pipe(function(){return n.errorThrown?t.Deferred().rejectWith(i,[n]).promise():o(arguments)}).pipe(e,r)),this._processQueue||o([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)!==!1&&i._onSend(e,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(e,n){e.uploadedBytes=e.uploadedBytes||0;var i,o,r=this,a=e.files[0],s=a.size,l=e.uploadedBytes,c=e.maxChunkSize||s,u=this._blobSlice,h=t.Deferred(),d=h.promise();return this._isXHRUpload(e)&&u&&(l||s>c)&&!e.data?n?!0:l>=s?(a.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",a.error])):(o=function(){var n=t.extend({},e),d=n._progress.loaded;n.blob=u.call(a,l,l+c,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+s,r._initXHRData(n),r._initProgressListener(n),i=(r._trigger("chunksend",null,n)!==!1&&t.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,a,c){l=r._getUploadedBytes(c)||l+n.chunkSize,d+n.chunkSize-n._progress.loaded&&r._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=a,n.jqXHR=c,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),s>l?o():h.resolveWith(n.context,[i,a,c])}).fail(function(t,e,i){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),h.rejectWith(n.context,[t,e,i])})},this._enhancePromise(d),d.abort=function(){return i.abort()},o(),d):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,n,i,o){var r=o._progress.total,a=o._response;o._progress.loaded<r&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),a.result=o.result=e,a.textStatus=o.textStatus=n,a.jqXHR=o.jqXHR=i,this._trigger("done",null,o)},_onFail:function(t,e,n,i){var o=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),o.jqXHR=i.jqXHR=t,o.textStatus=i.textStatus=e,o.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(t,e,n,i){this._trigger("always",null,i)},_onSend:function(e,n){n.submit||this._addConvenienceMethods(e,n);var i,o,r,a,s=this,l=s._getAJAXSettings(n),c=function(){return s._sending+=1,l._bitrateTimer=new s._BitrateTimer,i=i||((o||s._trigger("send",t.Event("send",{delegatedEvent:e}),l)===!1)&&s._getXHRPromise(!1,l.context,o)||s._chunkedUpload(l)||t.ajax(l)).done(function(t,e,n){s._onDone(t,e,n,l)}).fail(function(t,e,n){s._onFail(t,e,n,l)}).always(function(t,e,n){if(s._onAlways(t,e,n,l),s._sending-=1,s._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=t.Deferred(),this._slots.push(r),a=r.pipe(c)):(this._sequence=this._sequence.pipe(c,c),a=this._sequence),a.abort=function(){return o=[void 0,"abort","abort"],i?i.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(a)):c()},_onAdd:function(e,n){var i,o,r,a,s=this,l=!0,c=t.extend({},this.options,n),u=n.files,h=u.length,d=c.limitMultiFileUploads,p=c.limitMultiFileUploadSize,f=c.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(c),v=0;if(!h)return!1;if(p&&void 0===u[0].size&&(p=void 0),(c.singleFileUploads||d||p)&&this._isXHRUpload(c))if(c.singleFileUploads||p||!d)if(!c.singleFileUploads&&p)for(r=[],i=[],a=0;h>a;a+=1)m+=u[a].size+f,(a+1===h||m+u[a+1].size+f>p||d&&a+1-v>=d)&&(r.push(u.slice(v,a+1)),o=g.slice(v,a+1),o.length||(o=g),i.push(o),v=a+1,m=0);else i=g;else for(r=[],i=[],a=0;h>a;a+=d)r.push(u.slice(a,a+d)),o=g.slice(a,a+d),o.length||(o=g),i.push(o);else r=[u],i=[g];return n.originalFiles=u,t.each(r||u,function(o,a){var c=t.extend({},n);return c.files=r?a:[a],c.paramName=i[o],s._initResponseObject(c),s._initProgressObject(c),s._addConvenienceMethods(e,c),l=s._trigger("add",t.Event("add",{delegatedEvent:e}),c)}),l},_replaceFileInput:function(e){var n=e.fileInput,i=n.clone(!0),o=n.is(document.activeElement);e.fileInputClone=i,t("<form></form>").append(i)[0].reset(),n.after(i).detach(),o&&i.focus(),t.cleanData(n.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===n[0]?i[0]:e}),n[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(e,n){var i,o=this,r=t.Deferred(),a=function(t){t&&!t.entry&&(t.entry=e),r.resolve([t])},s=function(t){o._handleFileTreeEntries(t,n+e.name+"/").done(function(t){r.resolve(t)}).fail(a)},l=function(){i.readEntries(function(t){t.length?(c=c.concat(t),l()):s(c)},a)},c=[];return n=n||"",e.isFile?e._file?(e._file.relativePath=n,r.resolve(e._file)):e.file(function(t){t.relativePath=n,r.resolve(t)},a):e.isDirectory?(i=e.createReader(),l()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(e,n){var i=this;return t.when.apply(t,t.map(e,function(t){return i._handleFileTreeEntry(t,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var n=e.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var n,i,o=e.prop("webkitEntries")||e.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(n=t.makeArray(e.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(i=e.prop("value"),!i)return t.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,i={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(i.fileInput).always(function(o){i.files=o,n.options.replaceFileInput&&n._replaceFileInput(i),n._trigger("change",t.Event("change",{delegatedEvent:e}),i)!==!1&&n._onAdd(e,i)})},_onPaste:function(e){var n=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i={files:[]};
n&&n.length&&(t.each(n,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.files.push(n)}),this._trigger("paste",t.Event("paste",{delegatedEvent:e}),i)!==!1&&this._onAdd(e,i))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var n=this,i=e.dataTransfer,o={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){o.files=i,n._trigger("drop",t.Event("drop",{delegatedEvent:e}),o)!==!1&&n._onAdd(e,o)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,n){var i=-1!==t.inArray(e,this._specialOptions);i&&this._destroyEventHandlers(),this._super(e,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),n=e.pop();return e.shift(),new RegExp(e.join("/"),n)},_isRegExpOption:function(e,n){return"url"!==e&&"string"===t.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var e=this,n=this.options,i=this.element.data();t.each(this.element[0].attributes,function(t,o){var r,a=o.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,function(t){return t.charAt(1).toUpperCase()}),r=i[a],e._isRegExpOption(a,r)&&(r=e._getRegExp(r)),n[a]=r)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,n._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,i,o=this,r=t.Deferred(),a=r.promise();return a.abort=function(){return i=!0,n?n.abort():(r.reject(null,"abort","abort"),a)},this._getFileInputFiles(e.fileInput).always(function(t){if(!i){if(!t.length)return r.reject(),void 0;e.files=t,n=o._onSend(null,e),n.then(function(t,e,n){r.resolve(t,e,n)},function(t,e,n){r.reject(t,e,n)})}}),this._enhancePromise(a)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(window.jQuery)}(function(t){"use strict";var e=0;t.ajaxTransport("iframe",function(n){if(n.async){var i,o,r,a=n.initialIframeSrc||"javascript:false;";return{send:function(s,l){i=t('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),r=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+r+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+r+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+r+"_method=PATCH",n.type="POST"),e+=1,o=t('<iframe src="'+a+'" name="iframe-transport-'+e+'"></iframe>').bind("load",function(){var e,r=t.isArray(n.paramName)?n.paramName:[n.paramName];o.unbind("load").bind("load",function(){var e;try{if(e=o.contents(),!e.length||!e[0].firstChild)throw new Error}catch(n){e=void 0}l(200,"success",{iframe:e}),t('<iframe src="'+a+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",o.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&t.each(n.formData,function(e,n){t('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(e=n.fileInput.clone(),n.fileInput.after(function(t){return e[t]}),n.paramName&&n.fileInput.each(function(e){t(this).prop("name",r[e]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),e&&e.length&&n.fileInput.each(function(n,i){var o=t(e[n]);t(i).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(i)})}),i.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src",a),i&&i.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe xml":function(e){var n=e&&e[0];return n&&t.isXMLDoc(n)?n:t.parseXML(n.XMLDocument&&n.XMLDocument.xml||t(n.body).html())},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t;return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e){var n=t("matches-selector");e.exports=function(t,e,i){for(var o=i?t:t.parentNode;o&&o!==document;){if(n(o,e))return o;o=o.parentNode}}},{"matches-selector":5}],2:[function(t,e){function n(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,i){return function(n){n.delegateTarget=o(n.target,e,!0),n.delegateTarget&&i.call(t,n)}}var o=t("closest");e.exports=n},{closest:1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],4:[function(t,e){function n(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(t))return i(t,e,n);if(a.nodeList(t))return o(t,e,n);if(a.string(t))return r(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function o(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function r(t,e,n){return s(document.body,t,e,n)}var a=t("./is"),s=t("delegate");e.exports=n},{"./is":3,delegate:2}],5:[function(t,e){function n(t,e){if(o)return o.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1}var i=Element.prototype,o=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=n},{}],6:[function(t,e){function n(t){var e;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i),e=n.toString()}return e}e.exports=n},{}],7:[function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){o.off(t,i),e.apply(n,arguments)}var o=this;return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,o=n.length;for(i;o>i;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],o=[];if(i&&e)for(var r=0,a=i.length;a>r;r++)i[r].fn!==e&&i[r].fn._!==e&&o.push(i[r]);return o.length?n[t]=o:delete n[t],this}},e.exports=n},{}],8:[function(e,n,i){!function(o,r){if("function"==typeof t&&t.amd)t(["module","select"],r);else if("undefined"!=typeof i)r(n,e("select"));else{var a={exports:{}};r(a,o.select),o.clipboardAction=a.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){i(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""},t.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},t.prototype.selectFake=function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return t.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="fixed",this.fakeElem.style[e?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=o.default(this.fakeElem),this.copyText()},t.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function(){this.selectedText=o.default(this.target),this.copyText()},t.prototype.copyText=function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)},t.prototype.handleResult=function(t){t?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function(){this.removeFake()},a(t,[{key:"action",set:function(){var t=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s})},{select:6}],9:[function(e,n,i){!function(o,r){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if("undefined"!=typeof i)r(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};r(a,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=a.exports}}(this,function(t,e,n,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;return e.hasAttribute(n)?e.getAttribute(n):void 0}var c=o(e),u=o(n),h=o(i),d=function(t){function e(n,i){r(this,e);var o=a(this,t.call(this));return o.resolveOptions(i),o.listenClick(n),o}return s(e,t),e.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText},e.prototype.listenClick=function(t){var e=this;this.listener=h.default(t,"click",function(t){return e.onClick(t)})},e.prototype.onClick=function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})},e.prototype.defaultAction=function(t){return l("action",t)},e.prototype.defaultTarget=function(t){var e=l("target",t);return e?document.querySelector(e):void 0},e.prototype.defaultText=function(t){return l("text",t)},e.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(u.default);t.exports=d})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)}),!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t.returnExportsGlobal=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){"use strict";var e,n,i,o,r,a,s,l,c,u,h;u="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return this.getPosition()},e.prototype.getPosition=function(){var t,e;return e=this.getOffset(),t=this.$inputor.offset(),e.left-=t.left,e.top-=t.top,e},e.prototype.getOldIEPos=function(){var t,e;return e=s.selection.createRange(),t=s.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?(t=n.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):s.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=s.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,i,o,r;return c.getSelection&&(i=this.range())?(i.endOffset-1>0&&i.endContainer===!this.domInputor&&(e=i.cloneRange(),e.setStart(i.endContainer,i.endOffset-1),e.setEnd(i.endContainer,i.endOffset),o=e.getBoundingClientRect(),n={height:o.height,left:o.left+o.width,top:o.top},e.detach()),n&&0!==(null!=n?n.height:void 0)||(e=i.cloneRange(),r=t(s.createTextNode("|")),e.insertNode(r[0]),e.selectNode(r[0]),o=e.getBoundingClientRect(),n={height:o.height,left:o.left,top:o.top},r.remove(),e.detach())):s.selection&&(n=this.getOldIEOffset()),n&&(n.top+=t(c).scrollTop(),n.left+=t(c).scrollLeft()),n},e.prototype.range=function(){var t;return c.getSelection?(t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null):void 0},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,i,o,r,a;return e=this.domInputor,r=s.selection.createRange(),o=0,r&&r.parentElement()===e&&(i=e.value.replace(/\r\n/g,"\n"),n=i.length,a=e.createTextRange(),a.moveToBookmark(r.getBookmark()),t=e.createTextRange(),t.collapse(!1),o=a.compareEndPoints("StartToEnd",t)>-1?n:-a.moveStart("character",-n)),o},e.prototype.getPos=function(){return s.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,s.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,n,i,o;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),i=n.boundingLeft,o=n.boundingTop,e=n.boundingHeight,{left:i,top:o,height:e}},e.prototype.getOffset=function(e){var n,i,o;return n=this.$inputor,s.selection?(i=this.getIEOffset(e),i.top+=t(c).scrollTop()+n.scrollTop(),i.left+=t(c).scrollLeft()+n.scrollLeft(),i):(i=n.offset(),o=this.getPosition(e),i={left:i.left+o.left-n.scrollLeft(),top:i.top+o.top-n.scrollTop(),height:o.height})},e.prototype.getPosition=function(t){var e,n,o,r,a,s,l;return e=this.$inputor,r=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},void 0===t&&(t=this.getPos()),l=e.val().slice(0,t),o=e.val().slice(t),a="<span style='position: relative; display: inline;'>"+r(l)+"</span>",a+="<span id='caret' style='position: relative; display: inline;'>|</span>",a+="<span style='position: relative; display: inline;'>"+r(o)+"</span>",s=new i(e),n=s.create(a).rect()},e.prototype.getIEPosition=function(t){var e,n,i,o,r;return i=this.getIEOffset(t),n=this.$inputor.offset(),o=i.left-n.left,r=i.top-n.top,e=i.height,{left:o,top:r,height:e}},e}(),i=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,i){return e[i]=n.$inputor.css(i)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),o={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},a={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return s.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){var e;return e=this.getOffset(t)}},s=null,c=null,l=null,h=function(t){var e;return(e=null!=t?t.iframe:void 0)?(l=e,c=e.contentWindow,s=e.contentDocument||c.document):(l=void 0,c=window,s=document)},r=function(t){var e;s=t[0].ownerDocument,c=s.defaultView||s.parentWindow;try{return l=c.frameElement}catch(n){e=n}},t.fn.caret=function(i,r,s){var l;return a[i]?(t.isPlainObject(r)?(h(r),r=void 0):h(s),l=o.contentEditable(this)?new e(this):new n(this),a[i].apply(l,[r])):t.error("Method "+i+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=o,t.fn.caret.apis=a}),!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e,n;n={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},e={beforeSave:function(t){return o.arrayToDefaultHash(t)},matcher:function(t,e,n,i){var o,r,a,s,l;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),o=decodeURI("%C3%80"),r=decodeURI("%C3%BF"),l=i?" ":"",s=new RegExp(t+"([A-Za-z"+o+"-"+r+"0-9_"+l+"'.+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),a=s.exec(e),a?a[2]||a[1]:null},filter:function(t,e,n){var i,o,r,a;for(i=[],o=0,a=e.length;a>o;o++)r=e[o],~new String(r[n]).toLowerCase().indexOf(t.toLowerCase())&&i.push(r);return i},remoteFilter:null,sorter:function(t,e,n){var i,o,r,a;if(!t)return e;for(i=[],o=0,a=e.length;a>o;o++)r=e[o],r.atwho_order=new String(r[n]).toLowerCase().indexOf(t.toLowerCase()),r.atwho_order>-1&&i.push(r);return i.sort(function(t,e){return t.atwho_order-e.atwho_order})},tplEval:function(t,e){var n,i,o;o=t;try{return"string"!=typeof t&&(o=t(e)),o.replace(/\$\{([^\}]*)\}/g,function(t,n){return e[n]})}catch(i){return n=i,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,i){return"> "+e+"<strong>"+n+"</strong>"+i+" <"})):t},beforeInsert:function(t){return t},beforeReposition:function(t){return t},afterMatchFailed:function(){}};var i;i=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=t(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){var n;return null!=(n=this.$el)&&n.remove(),t(e.body).append(this.$el=t("<div class='atwho-container'></div>"))},e.prototype.setupRootElement=function(e,n){var i,o;if(null==n&&(n=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(o){if(i=o,this.iframe=null,t.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+i)}}return this.createContainer((this.iframeAsRoot=n)?this.document:document)},e.prototype.controller=function(t){var e,n,i,o;if(this.aliasMaps[t])n=this.controllers[this.aliasMaps[t]];else{o=this.controllers;for(i in o)if(e=o[i],i===t){n=e;break}}return n?n:this.controllers[this.currentFlag]},e.prototype.setContextFor=function(t){return this.currentFlag=t,this},e.prototype.reg=function(t,e){var n,i;return i=(n=this.controllers)[t]||(n[t]=this.$inputor.is("[contentEditable]")?new c(this,t):new a(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),i.init(e),this},e.prototype.listen=function(){return this.$inputor.on("compositionstart",function(t){return function(){var e;return null!=(e=t.controller())&&e.view.hide(),t.isComposing=!0,null}}(this)).on("compositionend",function(t){return function(){return t.isComposing=!1,setTimeout(function(e){return t.dispatch(e)}),null}}(this)).on("keyup.atwhoInner",function(t){return function(e){return t.onKeyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.onKeydown(e)}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;return(n=t.controller())?(n.expectedQueryCBId=null,n.view.hide(e,n.getOpt("displayTimeout"))):void 0}}(this)).on("click.atwhoInner",function(t){return function(e){return t.dispatch(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(n){var i,o;return i=n.target.scrollTop,e!==i&&null!=(o=t.controller())&&o.view.hide(n),e=i,!0}}}(this)())},e.prototype.shutdown=function(){var t,e,n;n=this.controllers;for(t in n)e=n[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},e.prototype.dispatch=function(t){var e,n,i,o;i=this.controllers,o=[];for(e in i)n=i[e],o.push(n.lookUp(t));return o},e.prototype.onKeyup=function(e){var i;switch(e.keyCode){case n.ESC:e.preventDefault(),null!=(i=this.controller())&&i.view.hide();break;case n.DOWN:case n.UP:case n.CTRL:case n.ENTER:t.noop();break;case n.P:case n.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var i,o;if(o=null!=(i=this.controller())?i.view:void 0,o&&o.visible())switch(e.keyCode){case n.ESC:e.preventDefault(),o.hide(e);break;case n.UP:e.preventDefault(),o.prev();break;case n.DOWN:e.preventDefault(),o.next();break;case n.P:if(!e.ctrlKey)return;e.preventDefault(),o.prev();break;case n.N:if(!e.ctrlKey)return;e.preventDefault(),o.next();break;case n.TAB:case n.ENTER:case n.SPACE:if(!o.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&e.keyCode===n.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&e.keyCode===n.TAB)return;o.highlighted()?(e.preventDefault(),o.choose(e)):o.hide(e);break;default:t.noop()}},e}();var o,r=[].slice;o=function(){function n(e,n){this.app=e,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=t("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new u(this),this.view=new h(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.callDefault=function(){var n,i,o,a;a=arguments[0],n=2<=arguments.length?r.call(arguments,1):[];try{return e[a].apply(this,n)}catch(o){return i=o,t.error(i+" Or maybe At.js doesn't have function "+a)}},n.prototype.trigger=function(t,e){var n,i;return null==e&&(e=[]),e.push(this),n=this.getOpt("alias"),i=n?t+"-"+n+".atwho":t+".atwho",this.$inputor.trigger(i,e)},n.prototype.callbacks=function(t){return this.getOpt("callbacks")[t]||e[t]},n.prototype.getOpt=function(t){var e,n;try{return this.setting[t]}catch(n){return e=n,null}},n.prototype.insertContentFor=function(e){var n,i;return i=this.getOpt("insertTpl"),n=t.extend({},e.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,i,n,"onInsert")},n.prototype.renderView=function(t){var e;return e=this.getOpt("searchKey"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt("limit")))},n.arrayToDefaultHash=function(e){var n,i,o,r;if(!t.isArray(e))return e;for(r=[],n=0,o=e.length;o>n;n++)i=e[n],t.isPlainObject(i)?r.push(i):r.push({name:i});return r},n.prototype.lookUp=function(t){var e,n;return t&&"click"===t.type&&!this.getOpt("lookUpOnClick")||this.getOpt("suspendOnComposing")&&this.app.isComposing?void 0:(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(n=this.getOpt("delay"))?this._delayLookUp(e,n):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},n.prototype._delayLookUp=function(t,e){var n,i;return n=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=n),i=e-(n-this.previousCallTime),i>0&&e>i?(this.previousCallTime=n,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(e){return function(){return e.previousCallTime=0,e.delayedCallTimeout=null,e._lookUp(t)}}(this),e)):(this._stopDelayedCall(),this.previousCallTime!==n&&(this.previousCallTime=0),this._lookUp(t))},n.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0},n.prototype._generateQueryCBId=function(){return{}},n.prototype._lookUp=function(e){var n;return n=function(t,e){return t===this.expectedQueryCBId?e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(e.text,t.proxy(n,this,this.expectedQueryCBId))},n}();var a,s=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.catchQuery=function(){var t,e,n,i,o,r,a;return e=this.$inputor.val(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),a=e.slice(0,t),o=this.callbacks("matcher").call(this,this.at,a,this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar")),i="string"==typeof o,i&&o.length<this.getOpt("minLen",0)?void 0:(i&&o.length<=this.getOpt("maxLen",20)?(r=t-o.length,n=r+o.length,this.pos=r,o={text:o,headPos:r,endPos:n},this.trigger("matched",[this.at,o.text])):(o=null,this.view.hide()),this.query=o)},n.prototype.rect=function(){var e,n,i;return(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))?(this.app.iframe&&!this.app.iframeAsRoot&&(n=t(this.app.iframe).offset(),e.left+=n.left,e.top+=n.top),i=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+i}):void 0},n.prototype.insert=function(t){var e,n,i,o,r;return e=this.$inputor,n=e.val(),i=n.slice(0,Math.max(this.query.headPos-this.at.length,0)),o=""===(o=this.getOpt("suffix"))?o:o||" ",t+=o,r=""+i+t+n.slice(this.query.endPos||0),e.val(r),e.caret("pos",i.length+t.length,{iframe:this.app.iframe}),e.is(":focus")||e.focus(),e.change()},n}(o);var c,s=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;c=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return s(i,e),i.prototype._getRange=function(){var t;return t=this.app.window.getSelection(),t.rangeCount>0?t.getRangeAt(0):void 0},i.prototype._setRange=function(e,n,i){return null==i&&(i=this._getRange()),i?(n=t(n)[0],"after"===e?(i.setEndAfter(n),i.setStartAfter(n)):(i.setEndBefore(n),i.setStartBefore(n)),i.collapse(!1),this._clearRange(i)):void 0},i.prototype._clearRange=function(t){var e;return null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed?(e.removeAllRanges(),e.addRange(t)):void 0},i.prototype._movingEvent=function(t){var e;return"click"===t.type||(e=t.which)===n.RIGHT||e===n.LEFT||e===n.UP||e===n.DOWN},i.prototype._unwrap=function(e){var n;return e=t(e).unwrap().get(0),(n=e.nextSibling)&&n.nodeValue&&(e.nodeValue+=n.nodeValue,t(n).remove()),e},i.prototype.catchQuery=function(e){var i,o,r,a,s,l,c,u,h,d,p,f;
if((f=this._getRange())&&f.collapsed){if(e.which===n.ENTER)return(o=t(f.startContainer).closest(".atwho-query")).contents().unwrap(),o.is(":empty")&&o.remove(),(o=t(".atwho-query",this.app.document)).text(o.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(t(f.startContainer).is(this.$inputor))return void this._clearRange();e.which===n.BACKSPACE&&f.startContainer.nodeType===document.ELEMENT_NODE&&(h=f.startOffset-1)>=0?(r=f.cloneRange(),r.setStart(f.startContainer,h),t(r.cloneContents()).contents().last().is(".atwho-inserted")&&(s=t(f.startContainer).contents().get(h),this._setRange("after",t(s).contents().last()))):e.which===n.LEFT&&f.startContainer.nodeType===document.TEXT_NODE&&(i=t(f.startContainer.previousSibling),i.is(".atwho-inserted")&&0===f.startOffset&&this._setRange("after",i.contents().last()))}if(t(f.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(o=t(".atwho-query",this.app.document)).length>0&&o.is(":empty")&&0===o.text().length&&o.remove(),this._movingEvent(e)||o.removeClass("atwho-inserted"),o.length>0)switch(e.which){case n.LEFT:return this._setRange("before",o.get(0),f),void o.removeClass("atwho-query");case n.RIGHT:return this._setRange("after",o.get(0).nextSibling,f),void o.removeClass("atwho-query")}if(o.length>0&&(p=o.attr("data-atwho-at-query"))&&(o.empty().html(p).attr("data-atwho-at-query",null),this._setRange("after",o.get(0),f)),r=f.cloneRange(),r.setStart(f.startContainer,0),u=this.callbacks("matcher").call(this,this.at,r.toString(),this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar")),l="string"==typeof u,0===o.length&&l&&(a=f.startOffset-this.at.length-u.length)>=0&&(f.setStart(f.startContainer,a),o=t("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),f.surroundContents(o.get(0)),c=o.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(f.setStart(c,c.length),f.setEnd(c,c.length),this._clearRange(f)):this._setRange("after",c,f)),!(l&&u.length<this.getOpt("minLen",0)))return l&&u.length<=this.getOpt("maxLen",20)?(d={text:u,el:o},this.trigger("matched",[this.at,d.text]),this.query=d):(this.view.hide(),this.query={el:o},o.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&o.hasClass("atwho-inserted")?o.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,o)&&this._setRange("after",this._unwrap(o.text(o.text()).contents().first()))),null)}},i.prototype.rect=function(){var e,n,i;return i=this.query.el.offset(),this.app.iframe&&!this.app.iframeAsRoot&&(n=(e=t(this.app.iframe)).offset(),i.left+=n.left-this.$inputor.scrollLeft(),i.top+=n.top-this.$inputor.scrollTop()),i.bottom=i.top+this.query.el.height(),i},i.prototype.insert=function(t,e){var n,i,o,r;return this.$inputor.is(":focus")||this.$inputor.focus(),o=""===(o=this.getOpt("suffix"))?o:o||"",n=e.data("item-data"),this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(t).attr("data-atwho-at-query",""+n["atwho-at"]+this.query.text),(i=this._getRange())&&(i.setEndAfter(this.query.el[0]),i.collapse(!1),i.insertNode(r=this.app.document.createTextNode(""+o)),this._setRange("after",r,i)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()},i}(o);var u;u=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,i,o;return i=this.fetch(),o=this.context.getOpt("searchKey"),i=this.context.callbacks("filter").call(this.context,t,i,o)||[],n=this.context.callbacks("remoteFilter"),i.length>0||!n&&0===i.length?e(i):n.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}();var h;h=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return e.prototype.init=function(){var t,e;return e=this.context.getOpt("alias")||this.context.at.charCodeAt(0),t=this.context.getOpt("headerTpl"),t&&1===this.$el.children().length&&this.$el.prepend(t),this.$el.attr({id:"at-view-"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,n,i;return e=this.$el.find("ul"),n=0,i=0,e.on("mousemove.atwho-view","li",function(){return function(o){var r;return n===o.clientX&&i===o.clientY||(n=o.clientX,i=o.clientY,r=t(o.currentTarget),r.hasClass("cur"))?void 0:(e.find(".cur").removeClass("cur"),r.addClass("cur"))}}(this)).on("click.atwho-view","li",function(n){return function(i){return e.find(".cur").removeClass("cur"),t(i.currentTarget).addClass("cur"),n.choose(i),i.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.highlighted=function(){return this.$el.find(".cur").length>0},e.prototype.choose=function(t){var e,n;return(e=this.$el.find(".cur")).length&&(n=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,n,e,t),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.getOpt("hideWithoutSuffix")?this.stopShowing=!0:void 0},e.prototype.reposition=function(e){var n,i,o,r;return n=this.context.app.iframeAsRoot?this.context.app.window:window,e.bottom+this.$el.height()-t(n).scrollTop()>t(n).height()&&(e.bottom=e.top-this.$el.height()),e.left>(o=t(n).width()-this.$el.width()-5)&&(e.left=o),i={left:e.left,top:e.bottom},null!=(r=this.context.callbacks("beforeReposition"))&&r.call(this.context,i),this.$el.offset(i),this.context.trigger("reposition",[i])},e.prototype.next=function(){var t,e,n,i;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur"),n=e[0],i=n.offsetTop+n.offsetHeight+(n.nextSibling?n.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,i-this.$el.height()))},e.prototype.prev=function(){var t,e,n,i;return t=this.$el.find(".cur").removeClass("cur"),n=t.prev(),n.length||(n=this.$el.find("li:last")),n.addClass("cur"),i=n[0],e=i.offsetTop+i.offsetHeight+(i.nextSibling?i.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,e-this.$el.height()))},e.prototype.scrollTop=function(t){var e;return e=this.context.getOpt("scrollDuration"),e?this.$elUl.animate({scrollTop:t},e):this.$elUl.scrollTop(t)},e.prototype.show=function(){var t;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var n;return this.visible()?isNaN(e)?(this.$el.hide(),this.context.trigger("hidden",[t])):(n=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(n,e)):void 0},e.prototype.render=function(e){var n,i,o,r,a,s,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),i=this.$el.find("ul"),l=this.context.getOpt("displayTpl"),o=0,a=e.length;a>o;o++)r=e[o],r=t.extend({},r,{"atwho-at":this.context.at}),s=this.context.callbacks("tplEval").call(this.context,l,r,"onDisplay"),n=t(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text)),n.data("item-data",r),i.append(n);return this.show(),this.context.getOpt("highlightFirst")?i.find("li:first").addClass("cur"):void 0},e}();var d;d={load:function(t,e){var n;return(n=this.controller(t))?n.model.load(e):void 0},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;return(t=this.controller())?t.view.reposition(t.rect()):void 0},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t.fn.atwho=function(e){var n,o;return n=arguments,o=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var r,a;return(a=(r=t(this)).data("atwho"))||r.data("atwho",a=new i(this)),"object"!=typeof e&&e?d[e]&&a?o=d[e].apply(a,Array.prototype.slice.call(n,1)):t.error("Method "+e+" does not exist on jQuery.atwho"):a.reg(e.at,e)}),null!=o?o:this},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",headerTpl:null,callbacks:e,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,acceptSpaceBar:!1,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},t.fn.atwho.debug=!1}),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Ji.apply(null,arguments)}function e(t){Ji=t}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function o(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var n in e)r(e,n)&&(t[n]=e[n]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function s(t,e,n,i){return Pe(t,e,n,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(t){return null==t._pf&&(t._pf=l()),t._pf}function u(t){if(null==t._isValid){var e=c(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function h(t){var e=s(0/0);return null!=t?a(c(e),t):c(e).userInvalidated=!0,e}function d(t){return void 0===t}function p(t,e){var n,i,o;if(d(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),d(e._i)||(t._i=e._i),d(e._f)||(t._f=e._f),d(e._l)||(t._l=e._l),d(e._strict)||(t._strict=e._strict),d(e._tzm)||(t._tzm=e._tzm),d(e._isUTC)||(t._isUTC=e._isUTC),d(e._offset)||(t._offset=e._offset),d(e._pf)||(t._pf=c(e)),d(e._locale)||(t._locale=e._locale),Ki.length>0)for(n in Ki)i=Ki[n],o=e[i],d(o)||(t[i]=o);return t}function f(e){p(this,e),this._d=new Date(null!=e._d?e._d.getTime():0/0),to===!1&&(to=!0,t.updateOffset(this),to=!1)}function m(t){return t instanceof f||null!=t&&null!=t._isAMomentObject}function g(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=g(e)),n}function y(t,e,n){var i,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),a=0;for(i=0;o>i;i++)(n&&t[i]!==e[i]||!n&&v(t[i])!==v(e[i]))&&a++;return a+r}function _(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function w(t,e){var n=!0;return a(function(){return n&&(_(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}function b(t,e){eo[t]||(_(e),eo[t]=!0)}function k(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function x(t){return"[object Object]"===Object.prototype.toString.call(t)}function T(t){var e,n;for(n in t)e=t[n],k(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function D(t,e){var n,i=a({},t);for(n in e)r(e,n)&&(x(t[n])&&x(e[n])?(i[n]={},a(i[n],t[n]),a(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);return i}function C(t){null!=t&&this.set(t)}function S(t){return t?t.toLowerCase().replace("_","-"):t}function M(t){for(var e,n,i,o,r=0;r<t.length;){for(o=S(t[r]).split("-"),e=o.length,n=S(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=E(o.slice(0,e).join("-")))return i;if(n&&n.length>=e&&y(o,n,!0)>=e-1)break;e--}r++}return null}function E(t){var e=null;if(!io[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=no._abbr,require("./locale/"+t),$(e)}catch(n){}return io[t]}function $(t,e){var n;return t&&(n=d(e)?A(t):O(t,e),n&&(no=n)),no._abbr}function O(t,e){return null!==e?(e.abbr=t,null!=io[t]?(b("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),e=D(io[t]._config,e)):null!=e.parentLocale&&(null!=io[e.parentLocale]?e=D(io[e.parentLocale]._config,e):b("parentLocaleUndefined","specified parentLocale is not defined yet")),io[t]=new C(e),$(t),io[t]):(delete io[t],null)}function I(t,e){if(null!=e){var n;null!=io[t]&&(e=D(io[t]._config,e)),n=new C(e),n.parentLocale=io[t],io[t]=n,$(t)}else null!=io[t]&&(null!=io[t].parentLocale?io[t]=io[t].parentLocale:null!=io[t]&&delete io[t]);return io[t]}function A(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return no;if(!n(t)){if(e=E(t))return e;t=[t]}return M(t)}function P(){return Object.keys(io)}function U(t,e){var n=t.toLowerCase();oo[n]=oo[n+"s"]=oo[e]=t}function F(t){return"string"==typeof t?oo[t]||oo[t.toLowerCase()]:void 0}function R(t){var e,n,i={};for(n in t)r(t,n)&&(e=F(n),e&&(i[e]=t[n]));return i}function N(e,n){return function(i){return null!=i?(Y(this,e,i),t.updateOffset(this,n),this):L(this,e)}}function L(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():0/0}function Y(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function j(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=F(t),k(this[t]))return this[t](e);return this}function V(t,e,n){var i=""+Math.abs(t),o=e-i.length,r=t>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}function W(t,e,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),t&&(lo[t]=o),e&&(lo[e[0]]=function(){return V(o.apply(this,arguments),e[1],e[2])}),n&&(lo[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function q(t){var e,n,i=t.match(ro);for(e=0,n=i.length;n>e;e++)i[e]=lo[i[e]]?lo[i[e]]:H(i[e]);return function(o){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(o,t):i[e];return r}}function z(t,e){return t.isValid()?(e=B(e,t.localeData()),so[e]=so[e]||q(e),so[e](t)):t.localeData().invalidDate()}function B(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(ao.lastIndex=0;i>=0&&ao.test(t);)t=t.replace(ao,n),ao.lastIndex=0,i-=1;return t}function G(t,e,n){So[t]=k(e)?e:function(t){return t&&n?n:e}}function X(t,e){return r(So,t)?So[t](e._strict,e._locale):new RegExp(Q(t))}function Q(t){return Z(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,o){return e||n||i||o}))}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=v(t)}),n=0;n<t.length;n++)Mo[t[n]]=i}function K(t,e){J(t,function(t,n,i,o){i._w=i._w||{},e(t,i._w,i,o)})}function te(t,e,n){null!=e&&r(Mo,t)&&Mo[t](e,n._a,n,t)}function ee(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function ne(t,e){return n(this._months)?this._months[t.month()]:this._months[No.test(e)?"format":"standalone"][t.month()]}function ie(t,e){return n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[No.test(e)?"format":"standalone"][t.month()]}function oe(t,e,n){var i,o,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(o=s([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function re(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=v(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return n=Math.min(t.date(),ee(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ae(e){return null!=e?(re(this,e),t.updateOffset(this,!0),this):L(this,"Month")}function se(){return ee(this.year(),this.month())}function le(t){return this._monthsParseExact?(r(this,"_monthsRegex")||ue.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}function ce(t){return this._monthsParseExact?(r(this,"_monthsRegex")||ue.call(this),t?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}function ue(){function t(t,e){return e.length-t.length}var e,n,i=[],o=[],r=[];for(e=0;12>e;e++)n=s([2e3,e]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(t),o.sort(t),r.sort(t),e=0;12>e;e++)i[e]=Z(i[e]),o[e]=Z(o[e]),r[e]=Z(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")$","i")}function he(t){var e,n=t._a;return n&&-2===c(t).overflow&&(e=n[$o]<0||n[$o]>11?$o:n[Oo]<1||n[Oo]>ee(n[Eo],n[$o])?Oo:n[Io]<0||n[Io]>24||24===n[Io]&&(0!==n[Ao]||0!==n[Po]||0!==n[Uo])?Io:n[Ao]<0||n[Ao]>59?Ao:n[Po]<0||n[Po]>59?Po:n[Uo]<0||n[Uo]>999?Uo:-1,c(t)._overflowDayOfYear&&(Eo>e||e>Oo)&&(e=Oo),c(t)._overflowWeeks&&-1===e&&(e=Fo),c(t)._overflowWeekday&&-1===e&&(e=Ro),c(t).overflow=e),t}function de(t){var e,n,i,o,r,a,s=t._i,l=Wo.exec(s)||Ho.exec(s);if(l){for(c(t).iso=!0,e=0,n=zo.length;n>e;e++)if(zo[e][1].exec(l[1])){o=zo[e][0],i=zo[e][2]!==!1;break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,n=Bo.length;n>e;e++)if(Bo[e][1].exec(l[3])){r=(l[2]||" ")+Bo[e][0];break}if(null==r)return void(t._isValid=!1)}if(!i&&null!=r)return void(t._isValid=!1);if(l[4]){if(!qo.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=o+(r||"")+(a||""),Se(t)}else t._isValid=!1}function pe(e){var n=Go.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(de(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function fe(t,e,n,i,o,r,a){var s=new Date(t,e,n,i,o,r,a);return 100>t&&t>=0&&isFinite(s.getFullYear())&&s.setFullYear(t),s}function me(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function ge(t){return ve(t)?366:365}function ve(t){return t%4===0&&t%100!==0||t%400===0}function ye(){return ve(this.year())}function _e(t,e,n){var i=7+e-n,o=(7+me(t,0,i).getUTCDay()-e)%7;return-o+i-1}function we(t,e,n,i,o){var r,a,s=(7+n-i)%7,l=_e(t,i,o),c=1+7*(e-1)+s+l;return 0>=c?(r=t-1,a=ge(r)+c):c>ge(t)?(r=t+1,a=c-ge(t)):(r=t,a=c),{year:r,dayOfYear:a}}function be(t,e,n){var i,o,r=_e(t.year(),e,n),a=Math.floor((t.dayOfYear()-r-1)/7)+1;return 1>a?(o=t.year()-1,i=a+ke(o,e,n)):a>ke(t.year(),e,n)?(i=a-ke(t.year(),e,n),o=t.year()+1):(o=t.year(),i=a),{week:i,year:o}}function ke(t,e,n){var i=_e(t,e,n),o=_e(t+1,e,n);return(ge(t)-i+o)/7}function xe(t,e,n){return null!=t?t:null!=e?e:n}function Te(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function De(t){var e,n,i,o,r=[];if(!t._d){for(i=Te(t),t._w&&null==t._a[Oo]&&null==t._a[$o]&&Ce(t),t._dayOfYear&&(o=xe(t._a[Eo],i[Eo]),t._dayOfYear>ge(o)&&(c(t)._overflowDayOfYear=!0),n=me(o,0,t._dayOfYear),t._a[$o]=n.getUTCMonth(),t._a[Oo]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=i[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Io]&&0===t._a[Ao]&&0===t._a[Po]&&0===t._a[Uo]&&(t._nextDay=!0,t._a[Io]=0),t._d=(t._useUTC?me:fe).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Io]=24)}}function Ce(t){var e,n,i,o,r,a,s,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,a=4,n=xe(e.GG,t._a[Eo],be(Ue(),1,4).year),i=xe(e.W,1),o=xe(e.E,1),(1>o||o>7)&&(l=!0)):(r=t._locale._week.dow,a=t._locale._week.doy,n=xe(e.gg,t._a[Eo],be(Ue(),r,a).year),i=xe(e.w,1),null!=e.d?(o=e.d,(0>o||o>6)&&(l=!0)):null!=e.e?(o=e.e+r,(e.e<0||e.e>6)&&(l=!0)):o=r),1>i||i>ke(n,r,a)?c(t)._overflowWeeks=!0:null!=l?c(t)._overflowWeekday=!0:(s=we(n,i,o,r,a),t._a[Eo]=s.year,t._dayOfYear=s.dayOfYear)}function Se(e){if(e._f===t.ISO_8601)return void de(e);e._a=[],c(e).empty=!0;var n,i,o,r,a,s=""+e._i,l=s.length,u=0;for(o=B(e._f,e._locale).match(ro)||[],n=0;n<o.length;n++)r=o[n],i=(s.match(X(r,e))||[])[0],i&&(a=s.substr(0,s.indexOf(i)),a.length>0&&c(e).unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),u+=i.length),lo[r]?(i?c(e).empty=!1:c(e).unusedTokens.push(r),te(r,i,e)):e._strict&&!i&&c(e).unusedTokens.push(r);c(e).charsLeftOver=l-u,s.length>0&&c(e).unusedInput.push(s),c(e).bigHour===!0&&e._a[Io]<=12&&e._a[Io]>0&&(c(e).bigHour=void 0),e._a[Io]=Me(e._locale,e._a[Io],e._meridiem),De(e),he(e)}function Me(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function Ee(t){var e,n,i,o,r;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)r=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],Se(e),u(e)&&(r+=c(e).charsLeftOver,r+=10*c(e).unusedTokens.length,c(e).score=r,(null==i||i>r)&&(i=r,n=e));a(t,n||e)}function $e(t){if(!t._d){var e=R(t._i);t._a=o([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),De(t)}}function Oe(t){var e=new f(he(Ie(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ie(t){var e=t._i,o=t._f;return t._locale=t._locale||A(t._l),null===e||void 0===o&&""===e?h({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),m(e)?new f(he(e)):(n(o)?Ee(t):o?Se(t):i(e)?t._d=e:Ae(t),u(t)||(t._d=null),t))}function Ae(e){var r=e._i;void 0===r?e._d=new Date(t.now()):i(r)?e._d=new Date(+r):"string"==typeof r?pe(e):n(r)?(e._a=o(r.slice(0),function(t){return parseInt(t,10)}),De(e)):"object"==typeof r?$e(e):"number"==typeof r?e._d=new Date(r):t.createFromInputFallback(e)}function Pe(t,e,n,i,o){var r={};return"boolean"==typeof n&&(i=n,n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=n,r._i=t,r._f=e,r._strict=i,Oe(r)}function Ue(t,e,n,i){return Pe(t,e,n,i,!1)}function Fe(t,e){var i,o;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Ue();for(i=e[0],o=1;o<e.length;++o)(!e[o].isValid()||e[o][t](i))&&(i=e[o]);return i}function Re(){var t=[].slice.call(arguments,0);return Fe("isBefore",t)}function Ne(){var t=[].slice.call(arguments,0);return Fe("isAfter",t)}function Le(t){var e=R(t),n=e.year||0,i=e.quarter||0,o=e.month||0,r=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*s,this._days=+a+7*r,this._months=+o+3*i+12*n,this._data={},this._locale=A(),this._bubble()}function Ye(t){return t instanceof Le}function je(t,e){W(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+V(~~(t/60),2)+e+V(~~t%60,2)})}function Ve(t,e){var n=(e||"").match(t)||[],i=n[n.length-1]||[],o=(i+"").match(Ko)||["-",0,0],r=+(60*o[1])+v(o[2]);return"+"===o[0]?r:-r}function We(e,n){var o,r;return n._isUTC?(o=n.clone(),r=(m(e)||i(e)?+e:+Ue(e))-+o,o._d.setTime(+o._d+r),t.updateOffset(o,!1),o):Ue(e).local()}function He(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function qe(e,n){var i,o=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Ve(To,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=He(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?cn(this,nn(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:He(this):null!=e?this:0/0}function ze(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Be(t){return this.utcOffset(0,t)}function Ge(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(He(this),"m")),this}function Xe(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ve(xo,this._i)),this}function Qe(t){return this.isValid()?(t=t?Ue(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Ze(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Je(){if(!d(this._isDSTShifted))return this._isDSTShifted;var t={};if(p(t,this),t=Ie(t),t._a){var e=t._isUTC?s(t._a):Ue(t._a);this._isDSTShifted=this.isValid()&&y(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ke(){return this.isValid()?!this._isUTC:!1}function tn(){return this.isValid()?this._isUTC:!1}function en(){return this.isValid()?this._isUTC&&0===this._offset:!1}function nn(t,e){var n,i,o,a=t,s=null;return Ye(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(s=tr.exec(t))?(n="-"===s[1]?-1:1,a={y:0,d:v(s[Oo])*n,h:v(s[Io])*n,m:v(s[Ao])*n,s:v(s[Po])*n,ms:v(s[Uo])*n}):(s=er.exec(t))?(n="-"===s[1]?-1:1,a={y:on(s[2],n),M:on(s[3],n),w:on(s[4],n),d:on(s[5],n),h:on(s[6],n),m:on(s[7],n),s:on(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=an(Ue(a.from),Ue(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),i=new Le(a),Ye(t)&&r(t,"_locale")&&(i._locale=t._locale),i}function on(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function rn(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function an(t,e){var n;return t.isValid()&&e.isValid()?(e=We(e,t),t.isBefore(e)?n=rn(t,e):(n=rn(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function sn(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function ln(t,e){return function(n,i){var o,r;return null===i||isNaN(+i)||(b(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,o=nn(n,i),cn(this,o,t),this}}function cn(e,n,i,o){var r=n._milliseconds,a=sn(n._days),s=sn(n._months);e.isValid()&&(o=null==o?!0:o,r&&e._d.setTime(+e._d+r*i),a&&Y(e,"Date",L(e,"Date")+a*i),s&&re(e,L(e,"Month")+s*i),o&&t.updateOffset(e,a||s))}function un(t,e){var n=t||Ue(),i=We(n,this).startOf("day"),o=this.diff(i,"days",!0),r=-6>o?"sameElse":-1>o?"lastWeek":0>o?"lastDay":1>o?"sameDay":2>o?"nextDay":7>o?"nextWeek":"sameElse",a=e&&(k(e[r])?e[r]():e[r]);return this.format(a||this.localeData().calendar(r,this,Ue(n)))}function hn(){return new f(this)}function dn(t,e){var n=m(t)?t:Ue(t);return this.isValid()&&n.isValid()?(e=F(d(e)?"millisecond":e),"millisecond"===e?+this>+n:+n<+this.clone().startOf(e)):!1}function pn(t,e){var n=m(t)?t:Ue(t);return this.isValid()&&n.isValid()?(e=F(d(e)?"millisecond":e),"millisecond"===e?+n>+this:+this.clone().endOf(e)<+n):!1}function fn(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function mn(t,e){var n,i=m(t)?t:Ue(t);return this.isValid()&&i.isValid()?(e=F(e||"millisecond"),"millisecond"===e?+this===+i:(n=+i,+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))):!1}function gn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function vn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function yn(t,e,n){var i,o,r,a;return this.isValid()?(i=We(t,this),i.isValid()?(o=6e4*(i.utcOffset()-this.utcOffset()),e=F(e),"year"===e||"month"===e||"quarter"===e?(a=_n(this,i),"quarter"===e?a/=3:"year"===e&&(a/=12)):(r=this-i,a="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-o)/864e5:"week"===e?(r-o)/6048e5:r),n?a:g(a)):0/0):0/0}function _n(t,e){var n,i,o=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(o,"months");return 0>e-r?(n=t.clone().add(o-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(o+1,"months"),i=(e-r)/(n-r)),-(o+i)}function wn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function bn(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?k(Date.prototype.toISOString)?this.toDate().toISOString():z(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function kn(e){var n=z(this,e||t.defaultFormat);return this.localeData().postformat(n)}function xn(t,e){return this.isValid()&&(m(t)&&t.isValid()||Ue(t).isValid())?nn({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Tn(t){return this.from(Ue(),t)}function Dn(t,e){return this.isValid()&&(m(t)&&t.isValid()||Ue(t).isValid())?nn({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Cn(t){return this.to(Ue(),t)}function Sn(t){var e;return void 0===t?this._locale._abbr:(e=A(t),null!=e&&(this._locale=e),this)}function Mn(){return this._locale}function En(t){switch(t=F(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function $n(t){return t=F(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function On(){return+this._d-6e4*(this._offset||0)}function In(){return Math.floor(+this/1e3)}function An(){return this._offset?new Date(+this):this._d}function Pn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Un(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Fn(){return this.isValid()?this.toISOString():null}function Rn(){return u(this)}function Nn(){return a({},c(this))}function Ln(){return c(this).overflow}function Yn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function jn(t,e){W(0,[t,t.length],0,e)}function Vn(t){return zn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Wn(t){return zn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Hn(){return ke(this.year(),1,4)}function qn(){var t=this.localeData()._week;return ke(this.year(),t.dow,t.doy)}function zn(t,e,n,i,o){var r;return null==t?be(this,i,o).year:(r=ke(t,i,o),e>r&&(e=r),Bn.call(this,t,e,n,i,o))}function Bn(t,e,n,i,o){var r=we(t,e,n,i,o),a=me(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Gn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Xn(t){return be(t,this._week.dow,this._week.doy).week
}function Qn(){return this._week.dow}function Zn(){return this._week.doy}function Jn(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Kn(t){var e=be(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function ti(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function ei(t,e){return n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}function ni(t){return this._weekdaysShort[t.day()]}function ii(t){return this._weekdaysMin[t.day()]}function oi(t,e,n){var i,o,r;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;7>i;i++){if(o=Ue([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function ri(t){if(!this.isValid())return null!=t?this:0/0;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ti(t,this.localeData()),this.add(t-e,"d")):e}function ai(t){if(!this.isValid())return null!=t?this:0/0;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function si(t){return this.isValid()?null==t?this.day()||7:this.day(this.day()%7?t:t-7):null!=t?this:0/0}function li(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function ci(){return this.hours()%12||12}function ui(t,e){W(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function hi(t,e){return e._meridiemParse}function di(t){return"p"===(t+"").toLowerCase().charAt(0)}function pi(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function fi(t,e){e[Uo]=v(1e3*("0."+t))}function mi(){return this._isUTC?"UTC":""}function gi(){return this._isUTC?"Coordinated Universal Time":""}function vi(t){return Ue(1e3*t)}function yi(){return Ue.apply(null,arguments).parseZone()}function _i(t,e,n){var i=this._calendar[t];return k(i)?i.call(e,n):i}function wi(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function bi(){return this._invalidDate}function ki(t){return this._ordinal.replace("%d",t)}function xi(t){return t}function Ti(t,e,n,i){var o=this._relativeTime[n];return k(o)?o(t,e,n,i):o.replace(/%d/i,t)}function Di(t,e){var n=this._relativeTime[t>0?"future":"past"];return k(n)?n(e):n.replace(/%s/i,e)}function Ci(t,e,n,i){var o=A(),r=s().set(i,e);return o[n](r,t)}function Si(t,e,n,i,o){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Ci(t,e,n,o);var r,a=[];for(r=0;i>r;r++)a[r]=Ci(t,r,n,o);return a}function Mi(t,e){return Si(t,e,"months",12,"month")}function Ei(t,e){return Si(t,e,"monthsShort",12,"month")}function $i(t,e){return Si(t,e,"weekdays",7,"day")}function Oi(t,e){return Si(t,e,"weekdaysShort",7,"day")}function Ii(t,e){return Si(t,e,"weekdaysMin",7,"day")}function Ai(){var t=this._data;return this._milliseconds=Dr(this._milliseconds),this._days=Dr(this._days),this._months=Dr(this._months),t.milliseconds=Dr(t.milliseconds),t.seconds=Dr(t.seconds),t.minutes=Dr(t.minutes),t.hours=Dr(t.hours),t.months=Dr(t.months),t.years=Dr(t.years),this}function Pi(t,e,n,i){var o=nn(e,n);return t._milliseconds+=i*o._milliseconds,t._days+=i*o._days,t._months+=i*o._months,t._bubble()}function Ui(t,e){return Pi(this,t,e,1)}function Fi(t,e){return Pi(this,t,e,-1)}function Ri(t){return 0>t?Math.floor(t):Math.ceil(t)}function Ni(){var t,e,n,i,o,r=this._milliseconds,a=this._days,s=this._months,l=this._data;return r>=0&&a>=0&&s>=0||0>=r&&0>=a&&0>=s||(r+=864e5*Ri(Yi(s)+a),a=0,s=0),l.milliseconds=r%1e3,t=g(r/1e3),l.seconds=t%60,e=g(t/60),l.minutes=e%60,n=g(e/60),l.hours=n%24,a+=g(n/24),o=g(Li(a)),s+=o,a-=Ri(Yi(o)),i=g(s/12),s%=12,l.days=a,l.months=s,l.years=i,this}function Li(t){return 4800*t/146097}function Yi(t){return 146097*t/4800}function ji(t){var e,n,i=this._milliseconds;if(t=F(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+Li(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Yi(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Vi(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function Wi(t){return function(){return this.as(t)}}function Hi(t){return t=F(t),this[t+"s"]()}function qi(t){return function(){return this._data[t]}}function zi(){return g(this.days()/7)}function Bi(t,e,n,i,o){return o.relativeTime(e||1,!!n,t,i)}function Gi(t,e,n){var i=nn(t).abs(),o=jr(i.as("s")),r=jr(i.as("m")),a=jr(i.as("h")),s=jr(i.as("d")),l=jr(i.as("M")),c=jr(i.as("y")),u=o<Vr.s&&["s",o]||1>=r&&["m"]||r<Vr.m&&["mm",r]||1>=a&&["h"]||a<Vr.h&&["hh",a]||1>=s&&["d"]||s<Vr.d&&["dd",s]||1>=l&&["M"]||l<Vr.M&&["MM",l]||1>=c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,Bi.apply(null,u)}function Xi(t,e){return void 0===Vr[t]?!1:void 0===e?Vr[t]:(Vr[t]=e,!0)}function Qi(t){var e=this.localeData(),n=Gi(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Zi(){var t,e,n,i=Wr(this._milliseconds)/1e3,o=Wr(this._days),r=Wr(this._months);t=g(i/60),e=g(t/60),i%=60,t%=60,n=g(r/12),r%=12;var a=n,s=r,l=o,c=e,u=t,h=i,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||h?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(h?h+"S":""):"P0D"}var Ji,Ki=t.momentProperties=[],to=!1,eo={};t.suppressDeprecationWarnings=!1;var no,io={},oo={},ro=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ao=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,so={},lo={},co=/\d/,uo=/\d\d/,ho=/\d{3}/,po=/\d{4}/,fo=/[+-]?\d{6}/,mo=/\d\d?/,go=/\d\d\d\d?/,vo=/\d\d\d\d\d\d?/,yo=/\d{1,3}/,_o=/\d{1,4}/,wo=/[+-]?\d{1,6}/,bo=/\d+/,ko=/[+-]?\d+/,xo=/Z|[+-]\d\d:?\d\d/gi,To=/Z|[+-]\d\d(?::?\d\d)?/gi,Do=/[+-]?\d+(\.\d{1,3})?/,Co=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,So={},Mo={},Eo=0,$o=1,Oo=2,Io=3,Ao=4,Po=5,Uo=6,Fo=7,Ro=8;W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),W("MMMM",0,0,function(t){return this.localeData().months(this,t)}),U("month","M"),G("M",mo),G("MM",mo,uo),G("MMM",function(t,e){return e.monthsShortRegex(t)}),G("MMMM",function(t,e){return e.monthsRegex(t)}),J(["M","MM"],function(t,e){e[$o]=v(t)-1}),J(["MMM","MMMM"],function(t,e,n,i){var o=n._locale.monthsParse(t,i,n._strict);null!=o?e[$o]=o:c(n).invalidMonth=t});var No=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Lo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Yo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),jo=Co,Vo=Co,Wo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ho=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,qo=/Z|[+-]\d\d(?::?\d\d)?/,zo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Bo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Go=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),W("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),U("year","y"),G("Y",ko),G("YY",mo,uo),G("YYYY",_o,po),G("YYYYY",wo,fo),G("YYYYYY",wo,fo),J(["YYYYY","YYYYYY"],Eo),J("YYYY",function(e,n){n[Eo]=2===e.length?t.parseTwoDigitYear(e):v(e)}),J("YY",function(e,n){n[Eo]=t.parseTwoDigitYear(e)}),J("Y",function(t,e){e[Eo]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)};var Xo=N("FullYear",!1);t.ISO_8601=function(){};var Qo=w("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Ue.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:h()}),Zo=w("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Ue.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:h()}),Jo=function(){return Date.now?Date.now():+new Date};je("Z",":"),je("ZZ",""),G("Z",To),G("ZZ",To),J(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ve(To,t)});var Ko=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var tr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,er=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;nn.fn=Le.prototype;var nr=ln(1,"add"),ir=ln(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var or=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),jn("gggg","weekYear"),jn("ggggg","weekYear"),jn("GGGG","isoWeekYear"),jn("GGGGG","isoWeekYear"),U("weekYear","gg"),U("isoWeekYear","GG"),G("G",ko),G("g",ko),G("GG",mo,uo),G("gg",mo,uo),G("GGGG",_o,po),G("gggg",_o,po),G("GGGGG",wo,fo),G("ggggg",wo,fo),K(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=v(t)}),K(["gg","GG"],function(e,n,i,o){n[o]=t.parseTwoDigitYear(e)}),W("Q",0,"Qo","quarter"),U("quarter","Q"),G("Q",co),J("Q",function(t,e){e[$o]=3*(v(t)-1)}),W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),U("week","w"),U("isoWeek","W"),G("w",mo),G("ww",mo,uo),G("W",mo),G("WW",mo,uo),K(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=v(t)});var rr={dow:0,doy:6};W("D",["DD",2],"Do","date"),U("date","D"),G("D",mo),G("DD",mo,uo),G("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),J(["D","DD"],Oo),J("Do",function(t,e){e[Oo]=v(t.match(mo)[0],10)});var ar=N("Date",!0);W("d",0,"do","day"),W("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),W("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),W("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),U("day","d"),U("weekday","e"),U("isoWeekday","E"),G("d",mo),G("e",mo),G("E",mo),G("dd",Co),G("ddd",Co),G("dddd",Co),K(["dd","ddd","dddd"],function(t,e,n,i){var o=n._locale.weekdaysParse(t,i,n._strict);null!=o?e.d=o:c(n).invalidWeekday=t}),K(["d","e","E"],function(t,e,n,i){e[i]=v(t)});var sr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),lr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),cr="Su_Mo_Tu_We_Th_Fr_Sa".split("_");W("DDD",["DDDD",3],"DDDo","dayOfYear"),U("dayOfYear","DDD"),G("DDD",yo),G("DDDD",ho),J(["DDD","DDDD"],function(t,e,n){n._dayOfYear=v(t)}),W("H",["HH",2],0,"hour"),W("h",["hh",2],0,ci),W("hmm",0,0,function(){return""+ci.apply(this)+V(this.minutes(),2)}),W("hmmss",0,0,function(){return""+ci.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)}),ui("a",!0),ui("A",!1),U("hour","h"),G("a",hi),G("A",hi),G("H",mo),G("h",mo),G("HH",mo,uo),G("hh",mo,uo),G("hmm",go),G("hmmss",vo),G("Hmm",go),G("Hmmss",vo),J(["H","HH"],Io),J(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),J(["h","hh"],function(t,e,n){e[Io]=v(t),c(n).bigHour=!0}),J("hmm",function(t,e,n){var i=t.length-2;e[Io]=v(t.substr(0,i)),e[Ao]=v(t.substr(i)),c(n).bigHour=!0}),J("hmmss",function(t,e,n){var i=t.length-4,o=t.length-2;e[Io]=v(t.substr(0,i)),e[Ao]=v(t.substr(i,2)),e[Po]=v(t.substr(o)),c(n).bigHour=!0}),J("Hmm",function(t,e){var n=t.length-2;e[Io]=v(t.substr(0,n)),e[Ao]=v(t.substr(n))}),J("Hmmss",function(t,e){var n=t.length-4,i=t.length-2;e[Io]=v(t.substr(0,n)),e[Ao]=v(t.substr(n,2)),e[Po]=v(t.substr(i))});var ur=/[ap]\.?m?\.?/i,hr=N("Hours",!0);W("m",["mm",2],0,"minute"),U("minute","m"),G("m",mo),G("mm",mo,uo),J(["m","mm"],Ao);var dr=N("Minutes",!1);W("s",["ss",2],0,"second"),U("second","s"),G("s",mo),G("ss",mo,uo),J(["s","ss"],Po);var pr=N("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),U("millisecond","ms"),G("S",yo,co),G("SS",yo,uo),G("SSS",yo,ho);var fr;for(fr="SSSS";fr.length<=9;fr+="S")G(fr,bo);for(fr="S";fr.length<=9;fr+="S")J(fr,fi);var mr=N("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var gr=f.prototype;gr.add=nr,gr.calendar=un,gr.clone=hn,gr.diff=yn,gr.endOf=$n,gr.format=kn,gr.from=xn,gr.fromNow=Tn,gr.to=Dn,gr.toNow=Cn,gr.get=j,gr.invalidAt=Ln,gr.isAfter=dn,gr.isBefore=pn,gr.isBetween=fn,gr.isSame=mn,gr.isSameOrAfter=gn,gr.isSameOrBefore=vn,gr.isValid=Rn,gr.lang=or,gr.locale=Sn,gr.localeData=Mn,gr.max=Zo,gr.min=Qo,gr.parsingFlags=Nn,gr.set=j,gr.startOf=En,gr.subtract=ir,gr.toArray=Pn,gr.toObject=Un,gr.toDate=An,gr.toISOString=bn,gr.toJSON=Fn,gr.toString=wn,gr.unix=In,gr.valueOf=On,gr.creationData=Yn,gr.year=Xo,gr.isLeapYear=ye,gr.weekYear=Vn,gr.isoWeekYear=Wn,gr.quarter=gr.quarters=Gn,gr.month=ae,gr.daysInMonth=se,gr.week=gr.weeks=Jn,gr.isoWeek=gr.isoWeeks=Kn,gr.weeksInYear=qn,gr.isoWeeksInYear=Hn,gr.date=ar,gr.day=gr.days=ri,gr.weekday=ai,gr.isoWeekday=si,gr.dayOfYear=li,gr.hour=gr.hours=hr,gr.minute=gr.minutes=dr,gr.second=gr.seconds=pr,gr.millisecond=gr.milliseconds=mr,gr.utcOffset=qe,gr.utc=Be,gr.local=Ge,gr.parseZone=Xe,gr.hasAlignedHourOffset=Qe,gr.isDST=Ze,gr.isDSTShifted=Je,gr.isLocal=Ke,gr.isUtcOffset=tn,gr.isUtc=en,gr.isUTC=en,gr.zoneAbbr=mi,gr.zoneName=gi,gr.dates=w("dates accessor is deprecated. Use date instead.",ar),gr.months=w("months accessor is deprecated. Use month instead",ae),gr.years=w("years accessor is deprecated. Use year instead",Xo),gr.zone=w("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ze);var vr=gr,yr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},_r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},wr="Invalid date",br="%d",kr=/\d{1,2}/,xr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Tr=C.prototype;Tr._calendar=yr,Tr.calendar=_i,Tr._longDateFormat=_r,Tr.longDateFormat=wi,Tr._invalidDate=wr,Tr.invalidDate=bi,Tr._ordinal=br,Tr.ordinal=ki,Tr._ordinalParse=kr,Tr.preparse=xi,Tr.postformat=xi,Tr._relativeTime=xr,Tr.relativeTime=Ti,Tr.pastFuture=Di,Tr.set=T,Tr.months=ne,Tr._months=Lo,Tr.monthsShort=ie,Tr._monthsShort=Yo,Tr.monthsParse=oe,Tr._monthsRegex=Vo,Tr.monthsRegex=ce,Tr._monthsShortRegex=jo,Tr.monthsShortRegex=le,Tr.week=Xn,Tr._week=rr,Tr.firstDayOfYear=Zn,Tr.firstDayOfWeek=Qn,Tr.weekdays=ei,Tr._weekdays=sr,Tr.weekdaysMin=ii,Tr._weekdaysMin=cr,Tr.weekdaysShort=ni,Tr._weekdaysShort=lr,Tr.weekdaysParse=oi,Tr.isPM=di,Tr._meridiemParse=ur,Tr.meridiem=pi,$("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=w("moment.lang is deprecated. Use moment.locale instead.",$),t.langData=w("moment.langData is deprecated. Use moment.localeData instead.",A);var Dr=Math.abs,Cr=Wi("ms"),Sr=Wi("s"),Mr=Wi("m"),Er=Wi("h"),$r=Wi("d"),Or=Wi("w"),Ir=Wi("M"),Ar=Wi("y"),Pr=qi("milliseconds"),Ur=qi("seconds"),Fr=qi("minutes"),Rr=qi("hours"),Nr=qi("days"),Lr=qi("months"),Yr=qi("years"),jr=Math.round,Vr={s:45,m:45,h:22,d:26,M:11},Wr=Math.abs,Hr=Le.prototype;Hr.abs=Ai,Hr.add=Ui,Hr.subtract=Fi,Hr.as=ji,Hr.asMilliseconds=Cr,Hr.asSeconds=Sr,Hr.asMinutes=Mr,Hr.asHours=Er,Hr.asDays=$r,Hr.asWeeks=Or,Hr.asMonths=Ir,Hr.asYears=Ar,Hr.valueOf=Vi,Hr._bubble=Ni,Hr.get=Hi,Hr.milliseconds=Pr,Hr.seconds=Ur,Hr.minutes=Fr,Hr.hours=Rr,Hr.days=Nr,Hr.weeks=zi,Hr.months=Lr,Hr.years=Yr,Hr.humanize=Qi,Hr.toISOString=Zi,Hr.toString=Zi,Hr.toJSON=Zi,Hr.locale=Sn,Hr.localeData=Mn,Hr.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Zi),Hr.lang=or,W("X",0,0,"unix"),W("x",0,0,"valueOf"),G("x",ko),G("X",Do),J("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),J("x",function(t,e,n){n._d=new Date(v(t))}),t.version="2.12.0",e(Ue),t.fn=vr,t.min=Re,t.max=Ne,t.now=Jo,t.utc=s,t.unix=vi,t.months=Mi,t.isDate=i,t.locale=$,t.invalid=h,t.duration=nn,t.isMoment=m,t.weekdays=$i,t.parseZone=yi,t.localeData=A,t.isDuration=Ye,t.monthsShort=Ei,t.weekdaysMin=Ii,t.defineLocale=O,t.updateLocale=I,t.locales=P,t.weekdaysShort=Oi,t.normalizeUnits=F,t.relativeTimeThreshold=Xi,t.prototype=vr;var qr=t;return qr}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function o(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function r(t){return function(){return this[t].apply(this,arguments)}}function a(t){return t&&!isNaN(t.getTime())}function s(e,n){function i(t,e){return e.toLowerCase()}var o,r=t(e).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in r)n.test(l)&&(o=l.replace(s,i),a[o]=r[l]);return a}function l(e){var n={};if(g[e]||(e=e.split("-")[0],g[e])){var i=g[e];return t.each(m,function(t,e){e in i&&(n[e]=i[e])}),n}}var c=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;i>n;n++)if(this[n].valueOf()===e)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new c;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),u=function(e,n){t(e).data("datepicker",this),this._process_options(n),this.dates=new c,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(v.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(e){this._o=t.extend({},this._o,e);var o=this.o=t.extend({},this._o),r=o.language;switch(g[r]||(r=r.split("-")[0],g[r]||(r=f.language)),o.language=r,o.startView){case 2:case"decade":o.startView=2;break;case 1:case"year":o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case"months":o.minViewMode=1;break;case 2:case"years":o.minViewMode=2;break;default:o.minViewMode=0}switch(o.maxViewMode){case 0:case"days":o.maxViewMode=0;break;case 1:case"months":o.maxViewMode=1;break;default:o.maxViewMode=2}o.startView=Math.min(o.startView,o.maxViewMode),o.startView=Math.max(o.startView,o.minViewMode),o.multidate!==!0&&(o.multidate=Number(o.multidate)||!1,o.multidate!==!1&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var a=v.parseFormat(o.format);if(o.startDate!==-(1/0)&&(o.startDate=o.startDate?o.startDate instanceof Date?this._local_to_utc(this._zero_time(o.startDate)):v.parseDate(o.startDate,a,o.language):-(1/0)),o.endDate!==1/0&&(o.endDate=o.endDate?o.endDate instanceof Date?this._local_to_utc(this._zero_time(o.endDate)):v.parseDate(o.endDate,a,o.language):1/0),o.daysOfWeekDisabled=o.daysOfWeekDisabled||[],t.isArray(o.daysOfWeekDisabled)||(o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/)),o.daysOfWeekDisabled=t.map(o.daysOfWeekDisabled,function(t){return parseInt(t,10)}),o.daysOfWeekHighlighted=o.daysOfWeekHighlighted||[],t.isArray(o.daysOfWeekHighlighted)||(o.daysOfWeekHighlighted=o.daysOfWeekHighlighted.split(/[,\s]*/)),o.daysOfWeekHighlighted=t.map(o.daysOfWeekHighlighted,function(t){return parseInt(t,10)}),o.datesDisabled=o.datesDisabled||[],!t.isArray(o.datesDisabled)){var s=[];s.push(v.parseDate(o.datesDisabled,a,o.language)),o.datesDisabled=s}o.datesDisabled=t.map(o.datesDisabled,function(t){return v.parseDate(t,a,o.language)});var l=String(o.orientation).toLowerCase().split(/\s+/g),c=o.orientation.toLowerCase();if(l=t.grep(l,function(t){return/^auto|left|right|top|bottom$/.test(t)}),o.orientation={x:"auto",y:"auto"},c&&"auto"!==c)if(1===l.length)switch(l[0]){case"top":case"bottom":o.orientation.y=l[0];break;case"left":case"right":o.orientation.x=l[0]}else c=t.grep(l,function(t){return/^left|right$/.test(t)}),o.orientation.x=c[0]||"auto",c=t.grep(l,function(t){return/^top|bottom$/.test(t)}),o.orientation.y=c[0]||"auto";if(o.defaultViewDate){var u=o.defaultViewDate.year||(new Date).getFullYear(),h=o.defaultViewDate.month||0,d=o.defaultViewDate.day||1;o.defaultViewDate=n(u,h,d)}else o.defaultViewDate=i()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,o,r=0;r<t.length;r++)n=t[r][0],2===t[r].length?(i=e,o=t[r][1]):3===t[r].length&&(i=t[r][1],o=t[r][2]),n.on(o,i)},_unapplyEvents:function(t){for(var n,i,o,r=0;r<t.length;r++)n=t[r][0],2===t[r].length?(o=e,i=t[r][1]):3===t[r].length&&(o=t[r][1],i=t[r][2]),n.off(i,o)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};this.o.showOnFocus===!0&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),e],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.picker.hasClass("datepicker-inline")||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),o=this._utc_to_local(i);this.element.trigger({type:e,date:o,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)},this)})},show:function(){var e=this.component?this.element.find("input"):this.element;return e.attr("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this)},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return"undefined"!=typeof t?new Date(t):null},clearDates:function(){var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var t=this.getFormattedDate();return this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return v.formatDate(t,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){this._process_options({datesDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,o=t(this.o.container),r=o.width(),a="body"===this.o.container?t(document).scrollTop():o.scrollTop(),s=o.offset(),l=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&l.push(parseInt(e))});var c=Math.max.apply(Math,l)+this.o.zIndexOffset,u=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=u.left-s.left,f=u.top-s.top;"body"!==this.o.container&&(f+=a),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=e-d)):u.left<0?(this.picker.addClass("datepicker-orient-left"),p-=u.left-i):p+e>r?(this.picker.addClass("datepicker-orient-right"),p+=d-e):this.picker.addClass("datepicker-orient-left");var m,g=this.o.orientation.y;if("auto"===g&&(m=-a+f-n,g=0>m?"bottom":"top"),this.picker.addClass("datepicker-orient-"+g),"top"===g?f-=n+parseInt(this.picker.css("padding-top")):f+=h,this.o.rtl){var v=r-(p+d);this.picker.css({top:f,right:v,zIndex:c})}else this.picker.css({top:f,left:p,zIndex:c});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return v.parseDate(t,this.o.format,this.o.language)},this)),n=t.grep(n,t.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(n),this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate,i?this.setValue():n.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this
},fillDow:function(){var t=this.o.weekStart,e="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1}),e+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)e+='<th class="dow">'+g[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+g[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<o?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>o)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===r.getFullYear()&&e.getUTCMonth()===r.getMonth()&&e.getUTCDate()===r.getDate()&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),(!this.dateWithinRange(e)||this.dateIsDisabled(e))&&n.push("disabled"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},fill:function(){var i,o=new Date(this.viewDate),r=o.getUTCFullYear(),a=o.getUTCMonth(),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,h=g[this.o.language].today||g.en.today||"",d=g[this.o.language].clear||g.en.clear||"",p=g[this.o.language].titleFormat||g.en.titleFormat;if(!isNaN(r)&&!isNaN(a)){this.picker.find(".datepicker-days thead .datepicker-switch").text(v.formatDate(new n(r,a),p,this.o.language)),this.picker.find("tfoot .today").text(h).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(d).toggle(this.o.clearBtn!==!1),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var f=n(r,a-1,28),m=v.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(m),f.setUTCDate(m-(f.getUTCDay()-this.o.weekStart+7)%7);var y=new Date(f);f.getUTCFullYear()<100&&y.setUTCFullYear(f.getUTCFullYear()),y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var _,w=[];f.valueOf()<y;){if(f.getUTCDay()===this.o.weekStart&&(w.push("<tr>"),this.o.calendarWeeks)){var b=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),k=new Date(Number(b)+(11-b.getUTCDay())%7*864e5),x=new Date(Number(x=n(k.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),T=(k-x)/864e5/7+1;w.push('<td class="cw">'+T+"</td>")}if(_=this.getClassNames(f),_.push("day"),this.o.beforeShowDay!==t.noop){var D=this.o.beforeShowDay(this._utc_to_local(f));D===e?D={}:"boolean"==typeof D?D={enabled:D}:"string"==typeof D&&(D={classes:D}),D.enabled===!1&&_.push("disabled"),D.classes&&(_=_.concat(D.classes.split(/\s+/))),D.tooltip&&(i=D.tooltip)}_=t.unique(_),w.push('<td class="'+_.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+f.getUTCDate()+"</td>"),i=null,f.getUTCDay()===this.o.weekEnd&&w.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var C=g[this.o.language].monthsTitle||g.en.monthsTitle||"Months",S=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?C:r).end().find("span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===r&&S.eq(e.getUTCMonth()).addClass("active")}),(s>r||r>c)&&S.addClass("disabled"),r===s&&S.slice(0,l).addClass("disabled"),r===c&&S.slice(u+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var M=this;t.each(S,function(e,n){if(!t(n).hasClass("disabled")){var i=new Date(r,e,1),o=M.o.beforeShowMonth(i);o===!1&&t(n).addClass("disabled")}})}w="",r=10*parseInt(r/10,10);var E=this.picker.find(".datepicker-years").find(".datepicker-switch").text(r+"-"+(r+9)).end().find("td");r-=1;for(var $,O=t.map(this.dates,function(t){return t.getUTCFullYear()}),I=-1;11>I;I++){if($=["year"],i=null,-1===I?$.push("old"):10===I&&$.push("new"),-1!==t.inArray(r,O)&&$.push("active"),(s>r||r>c)&&$.push("disabled"),this.o.beforeShowYear!==t.noop){var A=this.o.beforeShowYear(new Date(r,0,1));A===e?A={}:"boolean"==typeof A?A={enabled:A}:"string"==typeof A&&(A={classes:A}),A.enabled===!1&&$.push("disabled"),A.classes&&($=$.concat(A.classes.split(/\s+/))),A.tooltip&&(i=A.tooltip)}w+='<span class="'+$.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+r+"</span>",r+=1}E.html(w)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault(),e.stopPropagation();var o,r,a,s=t(e.target).closest("span, td, th");if(1===s.length)switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var l=v.modes[this.viewMode].navStep*("prev"===s[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,l),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,l),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(i(),c);break;case"clear":this.clearDates()}break;case"span":s.hasClass("disabled")||(this.viewDate.setUTCDate(1),s.hasClass("month")?(a=1,r=s.parent().find("span").index(s),o=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(n(o,r,a)),this.showMode()):this.showMode(-1)):(a=1,r=0,o=parseInt(s.text(),10)||0,this.viewDate.setUTCFullYear(o),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(o,r,a)),this.showMode(-1)),this.fill());break;case"td":s.hasClass("day")&&!s.hasClass("disabled")&&(a=parseInt(s.text(),10)||1,o=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),s.hasClass("old")?0===r?(r=11,o-=1):r-=1:s.hasClass("new")&&(11===r?(r=0,o+=1):r+=1),this._setDate(n(o,r,a)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):this.o.multidate===!1?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!a(t))return this.o.defaultViewDate;if(!e)return t;var n,i,o=new Date(t.valueOf()),r=o.getUTCDate(),s=o.getUTCMonth(),l=Math.abs(e);if(e=e>0?1:-1,1===l)i=-1===e?function(){return o.getUTCMonth()===s}:function(){return o.getUTCMonth()!==n},n=s+e,o.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var c=0;l>c;c++)o=this.moveMonth(o,e);n=o.getUTCMonth(),o.setUTCDate(r),i=function(){return n!==o.getUTCMonth()}}for(;i();)o.setUTCDate(--r),o.setUTCMonth(n);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,function(t){return o(e,t)}).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(!this.picker.is(":visible"))return void((40===t.keyCode||27===t.keyCode)&&(this.show(),t.stopPropagation()));var e,n,i=!1,o=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,t.ctrlKey?(n=this.moveAvailableDate(o,e,"moveYear"),n&&this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveAvailableDate(o,e,"moveMonth"),n&&this._trigger("changeMonth",this.viewDate)):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(o,e,"moveDay"):this.weekOfDateIsDisabled(o)||(n=this.moveAvailableDate(o,e,"moveWeek")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(i){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+t))),this.picker.children("div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var h=function(e,n){t(e).data("datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,p.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var n=t(e.target).data("datepicker");if("undefined"!=typeof n){var i=n.getUTCDate(),o=t.inArray(e.target,this.inputs),r=o-1,a=o+1,s=this.inputs.length;if(-1!==o){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[r])for(;r>=0&&i<this.dates[r];)this.pickers[r--].setUTCDate(i);else if(i>this.dates[a])for(;s>a&&i>this.dates[a];)this.pickers[a++].setUTCDate(i);this.updateDates(),delete this.updating}}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var d=t.fn.datepicker,p=function(n){var i=Array.apply(null,arguments);i.shift();var o;if(this.each(function(){var e=t(this),r=e.data("datepicker"),a="object"==typeof n&&n;if(!r){var c=s(this,"date"),d=t.extend({},f,c,a),p=l(d.language),m=t.extend({},f,p,c,a);e.hasClass("input-daterange")||m.inputs?(t.extend(m,{inputs:m.inputs||e.find("input").toArray()}),r=new h(this,m)):r=new u(this,m),e.data("datepicker",r)}"string"==typeof n&&"function"==typeof r[n]&&(o=r[n].apply(r,i))}),o===e||o instanceof u||o instanceof h)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return o};t.fn.datepicker=p;var f=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:2,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:""},m=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=u;var g=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,v.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\x00").split("\x00"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(o,r,a){function s(){var t=this.slice(0,f[h].length),e=f[h].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!o)return e;if(o instanceof Date)return o;if("string"==typeof r&&(r=v.parseFormat(r)),r.toValue)return r.toValue(o,r,a);var l,c,h,d,p=/([\-+]\d+)([dmwy])/,f=o.match(/([\-+]\d+)([dmwy])/g),m={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(o)){for(o=new Date,h=0;h<f.length;h++)l=p.exec(f[h]),c=parseInt(l[1]),d=m[l[2]],o=u.prototype[d](o,c);return n(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate())}f=o&&o.match(this.nonpunctuation)||[],o=new Date;var y,_,w={},b=["yyyy","yy","M","MM","m","mm","d","dd"],k={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};k.M=k.MM=k.mm=k.m,k.dd=k.d,o=i();var x=r.parts.slice();if(f.length!==x.length&&(x=t(x).filter(function(e,n){return-1!==t.inArray(n,b)}).toArray()),f.length===x.length){var T;for(h=0,T=x.length;T>h;h++){if(y=parseInt(f[h],10),l=x[h],isNaN(y))switch(l){case"MM":_=t(g[a].months).filter(s),y=t.inArray(_[0],g[a].months)+1;break;case"M":_=t(g[a].monthsShort).filter(s),y=t.inArray(_[0],g[a].monthsShort)+1}w[l]=y}var D,C;for(h=0;h<b.length;h++)C=b[h],C in w&&!isNaN(w[C])&&(D=new Date(o),k[C](D,w[C]),isNaN(D)||(o=D))}return o},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var o={d:e.getUTCDate(),D:g[i].daysShort[e.getUTCDay()],DD:g[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:g[i].monthsShort[e.getUTCMonth()],MM:g[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var r=t.extend([],n.separators),a=0,s=n.parts.length;s>=a;a++)r.length&&e.push(r.shift()),e.push(o[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=d,this},t.fn.datepicker.version="1.5.1",t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),p.call(n,"show"))}),t(function(){p.call(t('[data-provide="datepicker-inline"]'))})}),!function(t){t.fn.datepicker.dates["en-GB"]={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",monthsTitle:"Months",clear:"Clear",weekStart:1,format:"dd/mm/yyyy"}}(jQuery),!function(t){t.fn.datepicker.dates.ja={days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],today:"",format:"yyyy/mm/dd",titleFormat:"yyyymm",clear:""}}(jQuery),!function(){function t(t){return document.createElementNS(l,t)}function e(t){return(10>t?"0":"")+t}function n(t){var e=++g+"";return t?t+e:e}function i(i,a){function l(t,e){var n=h.offset(),i=/^touch/.test(t.type),r=n.left+v,l=n.top+v,u=(i?t.originalEvent.touches[0]:t).pageX-r,d=(i?t.originalEvent.touches[0]:t).pageY-l,m=Math.sqrt(u*u+d*d),g=!1;if(!e||!(y-w>m||m>y+w)){t.preventDefault();var _=setTimeout(function(){o.addClass("clockpicker-moving")},200);c&&h.append(M.canvas),M.setHand(u,d,!e,!0),s.off(p).on(p,function(t){t.preventDefault();var e=/^touch/.test(t.type),n=(e?t.originalEvent.touches[0]:t).pageX-r,i=(e?t.originalEvent.touches[0]:t).pageY-l;(g||n!==u||i!==d)&&(g=!0,M.setHand(n,i,!1,!0))}),s.off(f).on(f,function(t){s.off(f),t.preventDefault();var n=/^touch/.test(t.type),i=(n?t.originalEvent.changedTouches[0]:t).pageX-r,c=(n?t.originalEvent.changedTouches[0]:t).pageY-l;(e||g)&&i===u&&c===d&&M.setHand(i,c),"hours"===M.currentView?M.toggleView("minutes",k/2):a.autoclose&&(M.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){M.done()},k/2)),h.prepend(F),clearTimeout(_),o.removeClass("clockpicker-moving"),s.off(p)})}}var u=r(x),h=u.find(".clockpicker-plate"),m=u.find(".clockpicker-hours"),g=u.find(".clockpicker-minutes"),T=u.find(".clockpicker-am-pm-block"),D="INPUT"===i.prop("tagName"),C=D?i:i.find("input"),S=i.find(".input-group-addon"),M=this;if(this.id=n("cp"),this.element=i,this.options=a,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=D,this.input=C,this.addon=S,this.popover=u,this.plate=h,this.hoursView=m,this.minutesView=g,this.amPmBlock=T,this.spanHours=u.find(".clockpicker-span-hours"),this.spanMinutes=u.find(".clockpicker-span-minutes"),this.spanAmPm=u.find(".clockpicker-span-am-pm"),this.amOrPm="PM",a.twelvehour){var E=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join("");r(E),r('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){M.amOrPm="AM",r(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),r('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){M.amOrPm="PM",r(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)}a.autoclose||r('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+a.donetext+"</button>").click(r.proxy(this.done,this)).appendTo(u),"top"!==a.placement&&"bottom"!==a.placement||"top"!==a.align&&"bottom"!==a.align||(a.align="left"),"left"!==a.placement&&"right"!==a.placement||"left"!==a.align&&"right"!==a.align||(a.align="top"),u.addClass(a.placement),u.addClass("clockpicker-align-"+a.align),this.spanHours.click(r.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(r.proxy(this.toggleView,this,"minutes")),C.on("focus.clockpicker click.clockpicker",r.proxy(this.show,this)),S.on("click.clockpicker",r.proxy(this.toggle,this));var $,O,I,A=r('<div class="clockpicker-tick"></div>');if(a.twelvehour)for($=1;13>$;$+=1){O=A.clone(),I=$/6*Math.PI;var P=y;O.css("font-size","120%"),O.css({left:v+Math.sin(I)*P-w,top:v-Math.cos(I)*P-w}),O.html(0===$?"00":$),m.append(O),O.on(d,l)}else for($=0;24>$;$+=1){O=A.clone(),I=$/6*Math.PI;var U=$>0&&13>$,P=U?_:y;O.css({left:v+Math.sin(I)*P-w,top:v-Math.cos(I)*P-w}),U&&O.css("font-size","120%"),O.html(0===$?"00":$),m.append(O),O.on(d,l)}for($=0;60>$;$+=5)O=A.clone(),I=$/30*Math.PI,O.css({left:v+Math.sin(I)*y-w,top:v-Math.cos(I)*y-w}),O.css("font-size","120%"),O.html(e($)),g.append(O),O.on(d,l);if(h.on(d,function(t){0===r(t.target).closest(".clockpicker-tick").length&&l(t,!0)}),c){var F=u.find(".clockpicker-canvas"),R=t("svg");R.setAttribute("class","clockpicker-svg"),R.setAttribute("width",b),R.setAttribute("height",b);var N=t("g");N.setAttribute("transform","translate("+v+","+v+")");var L=t("circle");L.setAttribute("class","clockpicker-canvas-bearing"),L.setAttribute("cx",0),L.setAttribute("cy",0),L.setAttribute("r",2);var Y=t("line");Y.setAttribute("x1",0),Y.setAttribute("y1",0);var j=t("circle");j.setAttribute("class","clockpicker-canvas-bg"),j.setAttribute("r",w);var V=t("circle");V.setAttribute("class","clockpicker-canvas-fg"),V.setAttribute("r",3.5),N.appendChild(Y),N.appendChild(j),N.appendChild(V),N.appendChild(L),R.appendChild(N),F.append(R),this.hand=Y,this.bg=j,this.fg=V,this.bearing=L,this.g=N,this.canvas=F}}var o,r=window.jQuery,a=r(window),s=r(document),l="http://www.w3.org/2000/svg",c="SVGAngle"in window&&function(){var t,e=document.createElement("div");return e.innerHTML="<svg/>",t=(e.firstChild&&e.firstChild.namespaceURI)==l,e.innerHTML="",t}(),u=function(){var t=document.createElement("div").style;return"transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t}(),h="ontouchstart"in window,d="mousedown"+(h?" touchstart":""),p="mousemove.clockpicker"+(h?" touchmove.clockpicker":""),f="mouseup.clockpicker"+(h?" touchend.clockpicker":""),m=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,g=0,v=100,y=80,_=54,w=13,b=2*v,k=u?350:1,x=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");i.DEFAULTS={"default":"",fromnow:0,placement:"bottom",align:"left",donetext:"",autoclose:!1,twelvehour:!1,vibrate:!0},i.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},i.prototype.locate=function(){var t=this.element,e=this.popover,n=t.offset(),i=t.outerWidth(),o=t.outerHeight(),r=this.options.placement,a=this.options.align,s={};switch(e.show(),r){case"bottom":s.top=n.top+o;break;case"right":s.left=n.left+i;break;case"top":s.top=n.top-e.outerHeight();break;case"left":s.left=n.left-e.outerWidth()}switch(a){case"left":s.left=n.left;break;case"right":s.left=n.left+i-e.outerWidth();break;case"top":s.top=n.top;break;case"bottom":s.top=n.top+o-e.outerHeight()}e.css(s)},i.prototype.show=function(){if(!this.isShown){var t=this;this.isAppended||(o=r(document.body).append(this.popover),a.on("resize.clockpicker"+this.id,function(){t.isShown&&t.locate()}),this.isAppended=!0);var n=((this.input.prop("value")||this.options["default"]||"")+"").split(":");if("now"===n[0]){var i=new Date(+new Date+this.options.fromnow);n=[i.getHours(),i.getMinutes()]}this.hours=+n[0]||0,this.minutes=+n[1]||0,this.spanHours.html(e(this.hours)),this.spanMinutes.html(e(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,s.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(e){var n=r(e.target);0===n.closest(t.popover).length&&0===n.closest(t.addon).length&&0===n.closest(t.input).length&&t.hide()}),s.on("keyup.clockpicker."+this.id,function(e){27===e.keyCode&&t.hide()})}},i.prototype.hide=function(){this.isShown=!1,s.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),s.off("keyup.clockpicker."+this.id),this.popover.hide()},i.prototype.toggleView=function(t,e){var n="hours"===t,i=n?this.hoursView:this.minutesView,o=n?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",n),this.spanMinutes.toggleClass("text-primary",!n),o.addClass("clockpicker-dial-out"),i.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(e),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){o.css("visibility","hidden")},k)},i.prototype.resetClock=function(t){var e=this.currentView,n=this[e],i="hours"===e,o=Math.PI/(i?6:30),r=n*o,a=i&&n>0&&13>n?_:y,s=Math.sin(r)*a,l=-Math.cos(r)*a,u=this;c&&t?(u.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){u.canvas.removeClass("clockpicker-canvas-out"),u.setHand(s,l)},t)):this.setHand(s,l)},i.prototype.setHand=function(t,n,i,o){var a,s=Math.atan2(t,-n),l="hours"===this.currentView,u=Math.PI/(l||i?6:30),h=Math.sqrt(t*t+n*n),d=this.options,p=l&&(y+_)/2>h,f=p?_:y;if(d.twelvehour&&(f=y),0>s&&(s=2*Math.PI+s),a=Math.round(s/u),s=a*u,d.twelvehour?l?0===a&&(a=12):(i&&(a*=5),60===a&&(a=0)):l?(12===a&&(a=0),a=p?0===a?12:a:0===a?0:a+12):(i&&(a*=5),60===a&&(a=0)),this[this.currentView]!==a&&m&&this.options.vibrate&&(this.vibrateTimer||(navigator[m](10),this.vibrateTimer=setTimeout(r.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=a,this[l?"spanHours":"spanMinutes"].html(e(a)),!c)return void this[l?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=r(this);t.toggleClass("active",a===+t.html())});o||!l&&a%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var g=Math.sin(s)*f,v=-Math.cos(s)*f;this.hand.setAttribute("x2",g),this.hand.setAttribute("y2",v),this.bg.setAttribute("cx",g),this.bg.setAttribute("cy",v),this.fg.setAttribute("cx",g),this.fg.setAttribute("cy",v)},i.prototype.done=function(){this.hide();var t=this.input.prop("value"),n=e(this.hours)+":"+e(this.minutes);this.options.twelvehour&&(n+=this.amOrPm),this.input.prop("value",n),n!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur")},i.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(a.off("resize.clockpicker"+this.id),this.popover.remove())},r.fn.clockpicker=function(t){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=r(this),o=n.data("clockpicker");if(o)"function"==typeof o[t]&&o[t].apply(o,e);else{var a=r.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);n.data("clockpicker",new i(n,a))}})}}(),!function(t,e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):e(t.jQuery)}(this,function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=t(this.options.menu),this.$appendTo=this.options.appendTo?t(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1,this.afterSelect=this.options.afterSelect,this.addItem=!1};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").data("value");if(this.$element.data("active",t),this.autoSelect||t){var e=this.updater(t);this.$element.val(this.displayText(e)||e).change(),this.afterSelect(e)}return this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var e,n=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return e="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,(this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element)).css({top:n.top+n.height+e,left:n.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){if(this.query="undefined"!=typeof e&&null!==e?e:this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var n=t.proxy(function(){t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(n,this.delay)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length||this.options.addItem?(e.length>0?this.$element.data("active",e[0]):this.$element.data("active",null),this.options.addItem&&e.push(this.options.addItem),"all"==this.options.items?this.render(e).show():this.render(e.slice(0,this.options.items)).show()):this.shown?this.hide():this
},matcher:function(t){var e=this.displayText(t);return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],o=[];e=t.shift();){var r=this.displayText(e);r.toLowerCase().indexOf(this.query.toLowerCase())?~r.indexOf(this.query)?i.push(e):o.push(e):n.push(e)}return n.concat(i,o)},highlighter:function(e){var n,i,o,r,a,s=t("<div></div>"),l=this.query,c=e.toLowerCase().indexOf(l.toLowerCase());if(n=l.length,0===n)return s.text(e).html();for(;c>-1;)i=e.substr(0,c),o=e.substr(c,n),r=e.substr(c+n),a=t("<strong></strong>").text(o),s.append(document.createTextNode(i)).append(a),e=r,c=e.toLowerCase().indexOf(l.toLowerCase());return s.append(document.createTextNode(e)).html()},render:function(e){var n=this,i=this,o=!1;return e=t(e).map(function(e,r){var a=i.displayText(r);return e=t(n.options.item).data("value",r),e.find("a").html(n.highlighter(a)),a==i.$element.val()&&(e.addClass("active"),i.$element.data("active",r),o=!0),e[0]}),this.autoSelect&&!o&&(e.first().addClass("active"),this.$element.data("active",e.first().data("value"))),this.$menu.html(e),this},displayText:function(t){return t.name||t},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:if(t.shiftKey)return;t.preventDefault(),this.prev();break;case 40:if(t.shiftKey)return;t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.shown||40!=e.keyCode?this.move(e):this.lookup()},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup(""))},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){var i=arguments;return"string"==typeof n&&"getActive"==n?this.data("active"):this.each(function(){var o=t(this),r=o.data("typeahead"),a="object"==typeof n&&n;r||o.data("typeahead",r=new e(this,a)),"string"==typeof n&&(i.length>1?r[n].apply(r,Array.prototype.slice.call(i,1)):r[n]())})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:t.noop,addItem:!1,delay:0},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}),function(t,e,n){"use strict";function i(t,e,n){var i,o=t.runtimeStyle&&t.runtimeStyle[e],r=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(i=r.left,o&&(t.runtimeStyle.left=t.currentStyle.left),r.left="fontSize"===e?"1em":n||0,n=r.pixelLeft+"px",r.left=i,o&&(t.runtimeStyle.left=o)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function o(t){return parseInt(t,10)}function r(t,e,o,r){if(t=(t||"").split(","),t=t[r||0]||t[0]||"auto",t=h.Util.trimText(t).split(" "),"backgroundSize"!==o||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=-1===t[0].indexOf("%")?i(e,o+"X",t[0]):t[0],t[1]===n){if("backgroundSize"===o)return t[1]="auto",t;t[1]=t[0]}t[1]=-1===t[1].indexOf("%")?i(e,o+"Y",t[1]):t[1]}return t}function a(t,e,n,i,o,r){var a,s,l,c,u=h.Util.getCSS(e,t,o);if(1===u.length&&(c=u[0],u=[],u[0]=c,u[1]=c),-1!==(""+u[0]).indexOf("%"))l=parseFloat(u[0])/100,s=n.width*l,"backgroundSize"!==t&&(s-=(r||i).width*l);else if("backgroundSize"===t)if("auto"===u[0])s=i.width;else if(/contain|cover/.test(u[0])){var d=h.Util.resizeBounds(i.width,i.height,n.width,n.height,u[0]);s=d.width,a=d.height}else s=parseInt(u[0],10);else s=parseInt(u[0],10);return"auto"===u[1]?a=s/i.width*i.height:-1!==(""+u[1]).indexOf("%")?(l=parseFloat(u[1])/100,a=n.height*l,"backgroundSize"!==t&&(a-=(r||i).height*l)):a=parseInt(u[1],10),[s,a]}function s(t,e){var n=[];return{storage:n,width:t,height:e,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return n.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return n.push({type:"variable",name:t,arguments:e}),e}}}function l(t){return{zindex:t,children:[]}}var c,u,h={};h.Util={},h.Util.log=function(e){h.logging&&t.console&&t.console.log&&t.console.log(e)},h.Util.trimText=function(t){return function(e){return t?t.apply(e):((e||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),h.Util.asFloat=function(t){return parseFloat(t)},function(){var t=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,e=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;h.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var i=n.match(t),o=[],r=0;i&&i.length>r;r++){var a=i[r].match(e);o.push({color:a[0],offsetX:a[1]?a[1].replace("px",""):0,offsetY:a[2]?a[2].replace("px",""):0,blur:a[3]?a[3].replace("px",""):0})}return o}}(),h.Util.parseBackgroundImage=function(t){var e,n,i,o,r,a,s,l,c=" \r\n	",u=[],h=0,d=0,p=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&l.push(n),"-"===e.substr(0,1)&&(o=e.indexOf("-",1)+1)>0&&(i=e.substr(0,o),e=e.substr(o)),u.push({prefix:i,method:e.toLowerCase(),value:r,args:l})),l=[],e=i=n=r=""};p();for(var f=0,m=t.length;m>f;f++)if(a=t[f],!(0===h&&c.indexOf(a)>-1)){switch(a){case'"':s?s===a&&(s=null):s=a;break;case"(":if(s)break;if(0===h){h=1,r+=a;continue}d++;break;case")":if(s)break;if(1===h){if(0===d){h=0,r+=a,p();continue}d--}break;case",":if(s)break;if(0===h){p();continue}if(1===h&&0===d&&!e.match(/^url$/i)){l.push(n),n="",r+=a;continue}}r+=a,0===h?e+=a:n+=a}return p(),u},h.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=t.offsetWidth,n.height=t.offsetHeight),n},h.Util.OffsetBounds=function(t){var e=t.offsetParent?h.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},h.Util.getCSS=function(t,n,i){c!==t&&(u=e.defaultView.getComputedStyle(t,null));var a=u[n];if(/^background(Size|Position)$/.test(n))return r(a,t,n,i);if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var s=a.split(" ");return 1>=s.length&&(s[1]=s[0]),s.map(o)}return a},h.Util.resizeBounds=function(t,e,n,i,o){var r,a,s=n/i,l=t/e;return o&&"auto"!==o?l>s^"contain"===o?(a=i,r=i*l):(r=n,a=n/l):(r=n,a=i),{width:r,height:a}},h.Util.BackgroundPosition=function(t,e,n,i,o){var r=a("backgroundPosition",t,e,n,i,o);return{left:r[0],top:r[1]}},h.Util.BackgroundSize=function(t,e,n,i){var o=a("backgroundSize",t,e,n,i);return{width:o[0],height:o[1]}},h.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},h.Util.Children=function(t){var e;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:function(t){var e=[];return null!==t&&function(t,e){var i=t.length,o=0;if("number"==typeof e.length)for(var r=e.length;r>o;o++)t[i++]=e[o];else for(;e[o]!==n;)t[i++]=e[o++];return t.length=i,t}(e,t),e}(t.childNodes)}catch(i){h.Util.log("html2canvas.Util.Children failed with exception: "+i.message),e=[]}return e},h.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},h.Util.Font=function(){var t={};return function(e,i,o){if(t[e+"-"+i]!==n)return t[e+"-"+i];var r,a,s,l=o.createElement("div"),c=o.createElement("img"),u=o.createElement("span"),h="Hidden Text";return l.style.visibility="hidden",l.style.fontFamily=e,l.style.fontSize=i,l.style.margin=0,l.style.padding=0,o.body.appendChild(l),c.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",c.width=1,c.height=1,c.style.margin=0,c.style.padding=0,c.style.verticalAlign="baseline",u.style.fontFamily=e,u.style.fontSize=i,u.style.margin=0,u.style.padding=0,u.appendChild(o.createTextNode(h)),l.appendChild(u),l.appendChild(c),r=c.offsetTop-u.offsetTop+1,l.removeChild(u),l.appendChild(o.createTextNode(h)),l.style.lineHeight="normal",c.style.verticalAlign="super",a=c.offsetTop-l.offsetTop+1,s={baseline:r,lineWidth:1,middle:a},t[e+"-"+i]=s,o.body.removeChild(l),s}}(),function(){function t(t){return function(e){try{t.addColorStop(e.stop,e.color)}catch(i){n.log(["failed to add color stop: ",i,"; tried to add: ",e])}}}var n=h.Util,i={};h.Generate=i;var o=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];i.parseGradient=function(t,e){var n,i,r,a,s,l,c,u,h,d,p,f,m=o.length;for(i=0;m>i&&!(r=t.match(o[i]));i+=1);if(r)switch(r[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},s=r[2].match(/\w+/g))for(l=s.length,i=0;l>i;i+=1)switch(s[i]){case"top":n.y0=0,n.y1=e.height;break;case"right":n.x0=e.width,n.x1=0;break;case"bottom":n.y0=e.height,n.y1=0;break;case"left":n.x0=0,n.x1=e.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=e.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=e.height/2),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,c=1/Math.max(l-1,1),i=0;l>i;i+=1)u=s[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(a=parseFloat(u[2]),a/="%"===u[3]?100:e.width):a=i*c,n.colorStops.push({color:u[1],stop:a});break;case"-webkit-gradient":if(n={type:"radial"===r[2]?"circle":r[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*e.width/100,n.y0=s[2]*e.height/100,n.x1=s[3]*e.width/100,n.y1=s[4]*e.height/100),s=r[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(l=s.length,i=0;l>i;i+=1)u=s[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),a=parseFloat(u[2]),"from"===u[1]&&(a=0),"to"===u[1]&&(a=1),n.colorStops.push({color:u[3],stop:a});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.x0=s[1]*e.width/100,n.y0=s[2]*e.height/100,n.x1=e.width-n.x0,n.y1=e.height-n.y0),s=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(l=s.length,c=1/Math.max(l-1,1),i=0;l>i;i+=1)u=s[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),u[2]?(a=parseFloat(u[2]),u[3]&&(a/=100)):a=i*c,n.colorStops.push({color:u[1],stop:a});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},s=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),s&&(n.cx=s[1]*e.width/100,n.cy=s[2]*e.height/100),s=r[3].match(/\w+/),u=r[4].match(/[a-z\-]*/),s&&u)switch(u[0]){case"farthest-corner":case"cover":case"":h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(h,d,p,f);break;case"closest-corner":h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(h,d,p,f);break;case"farthest-side":"circle"===s[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===s[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(s=r[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,c=1/Math.max(l-1,1),i=0;l>i;i+=1)u=s[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(a=parseFloat(u[2]),a/="%"===u[3]?100:e.width):a=i*c,n.colorStops.push({color:u[1],stop:a})}return n},i.Gradient=function(n,i){if(0!==i.width&&0!==i.height){var o,r,a=e.createElement("canvas"),s=a.getContext("2d");if(a.width=i.width,a.height=i.height,o=h.Generate.parseGradient(n,i))switch(o.type){case"linear":r=s.createLinearGradient(o.x0,o.y0,o.x1,o.y1),o.colorStops.forEach(t(r)),s.fillStyle=r,s.fillRect(0,0,i.width,i.height);break;case"circle":r=s.createRadialGradient(o.cx,o.cy,0,o.cx,o.cy,o.rx),o.colorStops.forEach(t(r)),s.fillStyle=r,s.fillRect(0,0,i.width,i.height);break;case"ellipse":var l=e.createElement("canvas"),c=l.getContext("2d"),u=Math.max(o.rx,o.ry),d=2*u;l.width=l.height=d,r=c.createRadialGradient(o.rx,o.ry,0,o.rx,o.ry,u),o.colorStops.forEach(t(r)),c.fillStyle=r,c.fillRect(0,0,d,d),s.fillStyle=o.colorStops[o.colorStops.length-1].color,s.fillRect(0,0,a.width,a.height),s.drawImage(l,o.cx-o.rx,o.cy-o.ry,2*o.rx,2*o.ry)}return a}},i.ListAlpha=function(t){var e,n="";do e=t%26,n=String.fromCharCode(e+64)+n,t/=26;while(26*t>26);return n},i.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],o="",r=n.length;if(0>=t||t>=4e3)return t;for(e=0;r>e;e+=1)for(;t>=i[e];)t-=i[e],o+=n[e];return o}}(),h.Parse=function(i,o){function r(){return Math.max(Math.max(ue.body.scrollWidth,ue.documentElement.scrollWidth),Math.max(ue.body.offsetWidth,ue.documentElement.offsetWidth),Math.max(ue.body.clientWidth,ue.documentElement.clientWidth))}function a(){return Math.max(Math.max(ue.body.scrollHeight,ue.documentElement.scrollHeight),Math.max(ue.body.offsetHeight,ue.documentElement.offsetHeight),Math.max(ue.body.clientHeight,ue.documentElement.clientHeight))}function c(t,e){var n=parseInt(me(t,e),10);return isNaN(n)?0:n}function u(t,e,n,i,o,r){"transparent"!==r&&(t.setVariable("fillStyle",r),t.fillRect(e,n,i,o),ce+=1)}function d(t,e,i){return t.length>0?e+i.toUpperCase():n}function p(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,d);case"uppercase":return t.toUpperCase();default:return t}}function f(t){return/^(normal|none|0px)$/.test(t)}function m(t,e,n,i){null!==t&&he.trimText(t).length>0&&(i.fillText(t,e,n),ce+=1)}function g(t,e,i,o){var r=!1,a=me(e,"fontWeight"),s=me(e,"fontFamily"),l=me(e,"fontSize"),c=he.parseTextShadows(me(e,"textShadow"));switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}return t.setVariable("fillStyle",o),t.setVariable("font",[me(e,"fontStyle"),me(e,"fontVariant"),a,l,s].join(" ")),t.setVariable("textAlign",r?"right":"left"),c.length&&(t.setVariable("shadowColor",c[0].color),t.setVariable("shadowOffsetX",c[0].offsetX),t.setVariable("shadowOffsetY",c[0].offsetY),t.setVariable("shadowBlur",c[0].blur)),"none"!==i?he.Font(s,l,ue):n}function v(t,e,n,i,o){switch(e){case"underline":u(t,n.left,Math.round(n.top+i.baseline+i.lineWidth),n.width,1,o);break;case"overline":u(t,n.left,Math.round(n.top),n.width,1,o);break;case"line-through":u(t,n.left,Math.ceil(n.top+i.middle+i.lineWidth),n.width,1,o)}}function y(t,e,n,i,o){var r;if(de.rangeBounds&&!o)("none"!==n||0!==he.trimText(e).length)&&(r=_(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var a=i?t.node.splitText(e.length):null;r=w(t.node,o),t.node=a}return r}function _(t,e,n){var i=ue.createRange();return i.setStart(e,n),i.setEnd(e,n+t.length),i.getBoundingClientRect()}function w(t,e){var n=t.parentNode,i=ue.createElement("wrapper"),o=t.cloneNode(!0);i.appendChild(t.cloneNode(!0)),n.replaceChild(i,t);var r=e?he.OffsetBounds(i):he.Bounds(i);return n.replaceChild(o,i),r}function b(t,e,n){var i,r,a=n.ctx,s=me(t,"color"),l=me(t,"textDecoration"),c=me(t,"textAlign"),u={node:e,textOffset:0};he.trimText(e.nodeValue).length>0&&(e.nodeValue=p(e.nodeValue,me(t,"textTransform")),c=c.replace(["-webkit-auto"],["auto"]),r=!o.letterRendering&&/^(left|right|justify|auto)$/.test(c)&&f(me(t,"letterSpacing"))?e.nodeValue.split(/(\b| )/):e.nodeValue.split(""),i=g(a,t,l,s),o.chinese&&r.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&(t=t.split(""),t.unshift(e,1),r.splice.apply(r,t))}),r.forEach(function(t,e){var o=y(u,t,l,r.length-1>e,n.transform.matrix);o&&(m(t,o.left,o.bottom,a),v(a,l,o,i,s))}))}function k(t,e){var n,i,o=ue.createElement("boundelement");return o.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",o.appendChild(ue.createTextNode(e)),t.insertBefore(o,t.firstChild),i=he.Bounds(o),t.removeChild(o),t.style.listStyleType=n,i}function x(t){var e=-1,n=1,i=t.parentNode.childNodes;if(t.parentNode){for(;i[++e]!==t;)1===i[e].nodeType&&n++;return n}return-1}function T(t,e){var n,i=x(t);switch(e){case"decimal":n=i;break;case"decimal-leading-zero":n=1===(""+i).length?i="0"+i:""+i;break;case"upper-roman":n=h.Generate.ListRoman(i);break;case"lower-roman":n=h.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":n=h.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":n=h.Generate.ListAlpha(i)}return n+". "}function D(t,e,n){var i,o,r,a=e.ctx,s=me(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(s)){if(o=T(t,s),r=k(t,o),g(a,t,"none",me(t,"color")),"inside"!==me(t,"listStylePosition"))return;a.setVariable("textAlign","left"),i=n.left,m(o,i,r.bottom,a)}}function C(t){var e=i[t];return e&&e.succeeded===!0?e.img:!1}function S(t,e){var n=Math.max(t.left,e.left),i=Math.max(t.top,e.top),o=Math.min(t.left+t.width,e.left+e.width),r=Math.min(t.top+t.height,e.top+e.height);return{left:n,top:i,width:o-n,height:r-i}}function M(t,e,n){var i,o="static"!==e.cssPosition,r=o?me(t,"zIndex"):"auto",a=me(t,"opacity"),s="none"!==me(t,"cssFloat");e.zIndex=i=l(r),i.isPositioned=o,i.isFloated=s,i.opacity=a,i.ownStacking="auto"!==r||1>a,n&&n.zIndex.children.push(e)}function E(t,e,n,i,o){var r=c(e,"paddingLeft"),a=c(e,"paddingTop"),s=c(e,"paddingRight"),l=c(e,"paddingBottom");j(t,n,0,0,n.width,n.height,i.left+r+o[3].width,i.top+a+o[0].width,i.width-(o[1].width+o[3].width+r+s),i.height-(o[0].width+o[2].width+a+l))}function $(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:c(t,"border"+e+"Width"),color:me(t,"border"+e+"Color")}})}function O(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return me(t,"border"+e+"Radius")})}function I(t,e,n,i){var o=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:i,subdivide:function(r){var a=o(t,e,r),s=o(e,n,r),l=o(n,i,r),c=o(a,s,r),u=o(s,l,r),h=o(c,u,r);return[I(t,a,c,h),I(h,u,l,i)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function A(t,e,n,i,o,r,a){e[0]>0||e[1]>0?(t.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(t),i[1].curveTo(t)):t.push(["line",r,a]),(n[0]>0||n[1]>0)&&t.push(["line",o[0].start.x,o[0].start.y])}function P(t,e,n,i,o,r,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function U(t,e,n){var i=t.left,o=t.top,r=t.width,a=t.height,s=e[0][0],l=e[0][1],c=e[1][0],u=e[1][1],h=e[2][0],d=e[2][1],p=e[3][0],f=e[3][1],m=r-c,g=a-d,v=r-h,y=a-f;return{topLeftOuter:ye(i,o,s,l).topLeft.subdivide(.5),topLeftInner:ye(i+n[3].width,o+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:ye(i+m,o,c,u).topRight.subdivide(.5),topRightInner:ye(i+Math.min(m,r+n[3].width),o+n[0].width,m>r+n[3].width?0:c-n[3].width,u-n[0].width).topRight.subdivide(.5),bottomRightOuter:ye(i+v,o+g,h,d).bottomRight.subdivide(.5),bottomRightInner:ye(i+Math.min(v,r+n[3].width),o+Math.min(g,a+n[0].width),Math.max(0,h-n[1].width),Math.max(0,d-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:ye(i,o+y,p,f).bottomLeft.subdivide(.5),bottomLeftInner:ye(i+n[3].width,o+y,Math.max(0,p-n[3].width),Math.max(0,f-n[2].width)).bottomLeft.subdivide(.5)}}function F(t,e,n,i,o){var r=me(t,"backgroundClip"),a=[];switch(r){case"content-box":case"padding-box":A(a,i[0],i[1],e.topLeftInner,e.topRightInner,o.left+n[3].width,o.top+n[0].width),A(a,i[1],i[2],e.topRightInner,e.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),A(a,i[2],i[3],e.bottomRightInner,e.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),A(a,i[3],i[0],e.bottomLeftInner,e.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:A(a,i[0],i[1],e.topLeftOuter,e.topRightOuter,o.left,o.top),A(a,i[1],i[2],e.topRightOuter,e.bottomRightOuter,o.left+o.width,o.top),A(a,i[2],i[3],e.bottomRightOuter,e.bottomLeftOuter,o.left+o.width,o.top+o.height),A(a,i[3],i[0],e.bottomLeftOuter,e.topLeftOuter,o.left,o.top+o.height)}return a}function R(t,e,n){var i,o,r,a,s,l,c=e.left,u=e.top,h=e.width,d=e.height,p=O(t),f=U(e,p,n),m={clip:F(t,f,n,p,e),borders:[]};for(i=0;4>i;i++)if(n[i].width>0){switch(o=c,r=u,a=h,s=d-n[2].width,i){case 0:s=n[0].width,l=P({c1:[o,r],c2:[o+a,r],c3:[o+a-n[1].width,r+s],c4:[o+n[3].width,r+s]},p[0],p[1],f.topLeftOuter,f.topLeftInner,f.topRightOuter,f.topRightInner);break;case 1:o=c+h-n[1].width,a=n[1].width,l=P({c1:[o+a,r],c2:[o+a,r+s+n[2].width],c3:[o,r+s],c4:[o,r+n[0].width]},p[1],p[2],f.topRightOuter,f.topRightInner,f.bottomRightOuter,f.bottomRightInner);break;case 2:r=r+d-n[2].width,s=n[2].width,l=P({c1:[o+a,r+s],c2:[o,r+s],c3:[o+n[3].width,r],c4:[o+a-n[3].width,r]},p[2],p[3],f.bottomRightOuter,f.bottomRightInner,f.bottomLeftOuter,f.bottomLeftInner);break;case 3:a=n[3].width,l=P({c1:[o,r+s+n[2].width],c2:[o,r],c3:[o+a,r+n[0].width],c4:[o+a,r+s]},p[3],p[0],f.bottomLeftOuter,f.bottomLeftInner,f.topLeftOuter,f.topLeftInner)}m.borders.push({args:l,color:n[i].color})}return m}function N(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function L(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),N(t,e),t.fill(),ce+=1)}function Y(t,e,n){var i,o,r=ue.createElement("valuewrap"),a=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];a.forEach(function(e){try{r.style[e]=me(t,e)}catch(n){he.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(r.style.lineHeight=me(t,"height")),r.style.top=e.top+"px",r.style.left=e.left+"px",i="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value,i||(i=t.placeholder),o=ue.createTextNode(i),r.appendChild(o),fe.appendChild(r),b(t,o,n),fe.removeChild(r)}function j(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),ce+=1}function V(n,i){var o=t.getComputedStyle(n,i);if(o&&o.content&&"none"!==o.content&&"-moz-alt-content"!==o.content&&"none"!==o.display){var r=o.content+"",a=r.substr(0,1);a===r.substr(r.length-1)&&a.match(/'|"/)&&(r=r.substr(1,r.length-2));var s="url"===r.substr(0,3),l=e.createElement(s?"img":"span");return l.className=ge+"-before "+ge+"-after",Object.keys(o).filter(W).forEach(function(t){try{l.style[t]=o[t]}catch(e){he.log(["Tried to assign readonly property ",t,"Error:",e])}}),s?l.src=he.parseBackgroundImage(r)[0].args[0]:l.innerHTML=r,l}}function W(e){return isNaN(t.parseInt(e,10))}function H(t,e){var n=V(t,":before"),i=V(t,":after");(n||i)&&(n&&(t.className+=" "+ge+"-before",t.parentNode.insertBefore(n,t),re(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(ge+"-before","").trim()),i&&(t.className+=" "+ge+"-after",t.appendChild(i),re(i,e,!0),t.removeChild(i),t.className=t.className.replace(ge+"-after","").trim()))}function q(t,e,n,i){var o=Math.round(i.left+n.left),r=Math.round(i.top+n.top);t.createPattern(e),t.translate(o,r),t.fill(),t.translate(-o,-r)}function z(t,e,n,i,o,r,a,s){var l=[];l.push(["line",Math.round(o),Math.round(r)]),l.push(["line",Math.round(o+a),Math.round(r)]),l.push(["line",Math.round(o+a),Math.round(s+r)]),l.push(["line",Math.round(o),Math.round(s+r)]),N(t,l),t.save(),t.clip(),q(t,e,n,i),t.restore()}function B(t,e,n){u(t,e.left,e.top,e.width,e.height,n)}function G(t,e,n,i,o){var r=he.BackgroundSize(t,e,i,o),a=he.BackgroundPosition(t,e,i,o,r),s=me(t,"backgroundRepeat").split(",").map(he.trimText);switch(i=Q(i,r),s=s[o]||s[0]){case"repeat-x":z(n,i,a,e,e.left,e.top+a.top,99999,i.height);break;case"repeat-y":z(n,i,a,e,e.left+a.left,e.top,i.width,99999);break;case"no-repeat":z(n,i,a,e,e.left+a.left,e.top+a.top,i.width,i.height);break;default:q(n,i,a,{top:e.top,left:e.left,width:i.width,height:i.height})}}function X(t,e,n){for(var i,o=me(t,"backgroundImage"),r=he.parseBackgroundImage(o),a=r.length;a--;)if(o=r[a],o.args&&0!==o.args.length){var s="url"===o.method?o.args[0]:o.value;i=C(s),i?G(t,e,n,i,a):he.log("html2canvas: Error loading background:",o)}}function Q(t,e){if(t.width===e.width&&t.height===e.height)return t;var n,i=ue.createElement("canvas");return i.width=e.width,i.height=e.height,n=i.getContext("2d"),j(n,t,0,0,t.width,t.height,0,0,e.width,e.height),i}function Z(t,e,n){return t.setVariable("globalAlpha",me(e,"opacity")*(n?n.opacity:1))}function J(t){return t.replace("px","")}function K(t){var e=me(t,"transform")||me(t,"-webkit-transform")||me(t,"-moz-transform")||me(t,"-ms-transform")||me(t,"-o-transform"),n=me(t,"transform-origin")||me(t,"-webkit-transform-origin")||me(t,"-moz-transform-origin")||me(t,"-ms-transform-origin")||me(t,"-o-transform-origin")||"0px 0px";n=n.split(" ").map(J).map(he.asFloat);var i;if(e&&"none"!==e){var o=e.match(_e);if(o)switch(o[1]){case"matrix":i=o[2].split(",").map(he.trimText).map(he.asFloat)}}return{origin:n,matrix:i}}function te(t,e,n,i){var l=s(e?n.width:r(),e?n.height:a()),c={ctx:l,opacity:Z(l,t,e),cssPosition:me(t,"position"),borders:$(t),transform:i,clip:e&&e.clip?he.Extend({},e.clip):null};return M(t,c,e),o.useOverflow===!0&&/(hidden|scroll|auto)/.test(me(t,"overflow"))===!0&&/(BODY)/i.test(t.nodeName)===!1&&(c.clip=c.clip?S(c.clip,n):n),c}function ee(t,e,n){var i={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(i=S(i,n)),i}function ne(t,e){var n=e.matrix?he.OffsetBounds(t):he.Bounds(t);return e.origin[0]+=n.left,e.origin[1]+=n.top,n}function ie(t,e,n,i){var o,r=K(t,e),a=ne(t,r),s=te(t,e,a,r),l=s.borders,c=s.ctx,u=ee(l,a,s.clip),h=R(t,a,l),d=pe.test(t.nodeName)?"#efefef":me(t,"backgroundColor");switch(N(c,h.clip),c.save(),c.clip(),u.height>0&&u.width>0&&!i?(B(c,a,d),X(t,u,c)):i&&(s.backgroundColor=d),c.restore(),h.borders.forEach(function(t){L(c,t.args,t.color)}),n||H(t,s),t.nodeName){case"IMG":(o=C(t.getAttribute("src")))?E(c,t,o,a,l):he.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder||"").length>0&&Y(t,a,s);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&Y(t,a,s);break;case"SELECT":(t.options||t.placeholder||"").length>0&&Y(t,a,s);break;case"LI":D(t,s,u);break;case"CANVAS":E(c,t,t,a,l)}return s}function oe(t){return"none"!==me(t,"display")&&"hidden"!==me(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}function re(t,e,n){oe(t)&&(e=ie(t,e,n,!1)||e,pe.test(t.nodeName)||ae(t,e,n))}function ae(t,e,n){he.Children(t).forEach(function(i){i.nodeType===i.ELEMENT_NODE?re(i,e,n):i.nodeType===i.TEXT_NODE&&b(t,i,e)})}function se(){var t=me(e.documentElement,"backgroundColor"),n=he.isTransparent(t)&&le===e.body,i=ie(le,null,!1,n);return ae(le,i),n&&(t=i.backgroundColor),fe.removeChild(ve),{backgroundColor:t,stack:i}}t.scroll(0,0);var le=o.elements===n?e.body:o.elements[0],ce=0,ue=le.ownerDocument,he=h.Util,de=he.Support(o,ue),pe=RegExp("("+o.ignoreElements+")"),fe=ue.body,me=he.getCSS,ge="___html2canvas___pseudoelement",ve=ue.createElement("style");ve.innerHTML="."+ge+'-before:before { content: "" !important; display: none !important; }.'+ge+'-after:after { content: "" !important; display: none !important; }',fe.appendChild(ve),i=i||{};var ye=function(t){return function(e,n,i,o){var r=i*t,a=o*t,s=e+i,l=n+o;return{topLeft:I({x:e,y:l},{x:e,y:l-a},{x:s-r,y:n},{x:s,y:n}),topRight:I({x:e,y:n},{x:e+r,y:n},{x:s,y:l-a},{x:s,y:l}),bottomRight:I({x:s,y:n},{x:s,y:n+a},{x:e+r,y:l},{x:e,y:l}),bottomLeft:I({x:s,y:l},{x:s-r,y:l},{x:e,y:n+a},{x:e,y:n})}
}}(4*((Math.sqrt(2)-1)/3)),_e=/(matrix)\((.+)\)/;return se()},h.Preload=function(i){function o(t){C.href=t,C.href=C.href;var e=C.protocol+C.host;return e===m}function r(){w.log("html2canvas: start: images: "+_.numLoaded+" / "+_.numTotal+" (failed: "+_.numFailed+")"),!_.firstRun&&_.numLoaded>=_.numTotal&&(w.log("Finished loading images: # "+_.numTotal+" (failed: "+_.numFailed+")"),"function"==typeof i.complete&&i.complete(_))}function a(e,o,a){var s,l,c=i.proxy;C.href=e,e=C.href,s="html2canvas_"+b++,a.callbackname=s,c+=c.indexOf("?")>-1?"&":"?",c+="url="+encodeURIComponent(e)+"&callback="+s,l=x.createElement("script"),t[s]=function(e){"error:"===e.substring(0,6)?(a.succeeded=!1,_.numLoaded++,_.numFailed++,r()):(f(o,a),o.src=e),t[s]=n;try{delete t[s]}catch(i){}l.parentNode.removeChild(l),l=null,delete a.script,delete a.callbackname},l.setAttribute("type","text/javascript"),l.setAttribute("src",c),a.script=l,t.document.body.appendChild(l)}function s(e,n){var i=t.getComputedStyle(e,n),o=i.content;"url"===o.substr(0,3)&&g.loadImage(h.Util.parseBackgroundImage(o)[0].args[0]),d(i.backgroundImage,e)}function l(t){s(t,":before"),s(t,":after")}function c(t,e){var i=h.Generate.Gradient(t,e);i!==n&&(_[t]={img:i,succeeded:!0},_.numTotal++,_.numLoaded++,r())}function u(t){return t&&t.method&&t.args&&t.args.length>0}function d(t,e){var i;h.Util.parseBackgroundImage(t).filter(u).forEach(function(t){"url"===t.method?g.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(i===n&&(i=h.Util.Bounds(e)),c(t.value,i))})}function p(t){var e=!1;try{w.Children(t).forEach(p)}catch(i){}try{e=t.nodeType}catch(o){e=!1,w.log("html2canvas: failed to access some element's nodeType - Exception: "+o.message)}if(1===e||e===n){l(t);try{d(w.getCSS(t,"backgroundImage"),t)}catch(i){w.log("html2canvas: failed to get background-image - Exception: "+i.message)}d(t)}}function f(e,o){e.onload=function(){o.timer!==n&&t.clearTimeout(o.timer),_.numLoaded++,o.succeeded=!0,e.onerror=e.onload=null,r()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(t.clearTimeout(o.timer),i.proxy)){var s=e.src;return e=new Image,o.img=e,e.src=s,a(e.src,e,o),n}_.numLoaded++,_.numFailed++,o.succeeded=!1,e.onerror=e.onload=null,r()}}var m,g,v,y,_={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},w=h.Util,b=0,k=i.elements[0]||e.body,x=k.ownerDocument,T=k.getElementsByTagName("img"),D=T.length,C=x.createElement("a"),S=function(t){return t.crossOrigin!==n}(new Image);for(C.href=t.location.href,m=C.protocol+C.host,g={loadImage:function(t){var e,r;t&&_[t]===n&&(e=new Image,t.match(/data:image\/.*;base64,/i)?(e.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),r=_[t]={img:e},_.numTotal++,f(e,r)):o(t)||i.allowTaint===!0?(r=_[t]={img:e},_.numTotal++,f(e,r),e.src=t):S&&!i.allowTaint&&i.useCORS?(e.crossOrigin="anonymous",r=_[t]={img:e},_.numTotal++,f(e,r),e.src=t):i.proxy&&(r=_[t]={img:e},_.numTotal++,a(t,e,r)))},cleanupDOM:function(o){var a,s;if(!_.cleanupDone){o&&"string"==typeof o?w.log("html2canvas: Cleanup because: "+o):w.log("html2canvas: Cleanup after timeout: "+i.timeout+" ms.");for(s in _)if(_.hasOwnProperty(s)&&(a=_[s],"object"==typeof a&&a.callbackname&&a.succeeded===n)){t[a.callbackname]=n;try{delete t[a.callbackname]}catch(l){}a.script&&a.script.parentNode&&(a.script.setAttribute("src","about:blank"),a.script.parentNode.removeChild(a.script)),_.numLoaded++,_.numFailed++,w.log("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+_.numLoaded+" / "+_.numTotal)}t.stop!==n?t.stop():e.execCommand!==n&&e.execCommand("Stop",!1),e.close!==n&&e.close(),_.cleanupDone=!0,o&&"string"==typeof o||r()}},renderingDone:function(){y&&t.clearTimeout(y)}},i.timeout>0&&(y=t.setTimeout(g.cleanupDOM,i.timeout)),w.log("html2canvas: Preload starts: finding background-images"),_.firstRun=!0,p(k),w.log("html2canvas: Preload: Finding images"),v=0;D>v;v+=1)g.loadImage(T[v].getAttribute("src"));return _.firstRun=!1,w.log("html2canvas: Preload: Done."),_.numTotal===_.numLoaded&&r(),g},h.Renderer=function(t,i){function o(t){function e(t){Object.keys(t).sort().forEach(function(n){var i=[],r=[],a=[],s=[];t[n].forEach(function(t){t.node.zIndex.isPositioned||1>t.node.zIndex.opacity?a.push(t):t.node.zIndex.isFloated?r.push(t):i.push(t)}),function l(t){t.forEach(function(t){s.push(t),t.children&&l(t.children)})}(i.concat(r,a)),s.forEach(function(t){t.context?e(t.context):o.push(t.node)})})}var i,o=[];return i=function(t){function e(t,i,o){var r="auto"===i.zIndex.zindex?0:Number(i.zIndex.zindex),a=t,s=i.zIndex.isPositioned,l=i.zIndex.isFloated,c={node:i},u=o;i.zIndex.ownStacking?(a=c.context={"!":[{node:i,children:[]}]},u=n):(s||l)&&(u=c.children=[]),0===r&&o?o.push(c):(t[r]||(t[r]=[]),t[r].push(c)),i.zIndex.children.forEach(function(t){e(a,t,u)})}var i={};return e(i,t),i}(t),e(i),o}function r(t){var e;if("string"==typeof i.renderer&&h.Renderer[t]!==n)e=h.Renderer[t](i);else{if("function"!=typeof t)throw Error("Unknown renderer");e=t(i)}if("function"!=typeof e)throw Error("Invalid renderer defined");return e}return r(i.renderer)(t,i,e,o(t.stack),h)},h.Util.Support=function(t,e){function i(){var t=new Image,i=e.createElement("canvas"),o=i.getContext===n?!1:i.getContext("2d");if(o===!1)return!1;i.width=i.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{o.drawImage(t,0,0),i.toDataURL()}catch(r){return!1}return h.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function o(){var t,n,i,o,r=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),i=t.getBoundingClientRect(),o=i.height,123===o&&(r=!0),e.body.removeChild(n))),r}return{rangeBounds:o(),svgRendering:t.svgRendering&&i()}},t.html2canvas=function(e,n){e=e.length?e:[e];var i,o,r={logging:!1,elements:e,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return r=h.Util.Extend(n,r),h.logging=r.logging,r.complete=function(t){("function"!=typeof r.onpreloaded||r.onpreloaded(t)!==!1)&&(i=h.Parse(t,r),("function"!=typeof r.onparsed||r.onparsed(i)!==!1)&&(o=h.Renderer(i,r),"function"==typeof r.onrendered&&r.onrendered(o)))},t.setTimeout(function(){h.Preload(r)},0),{render:function(t,e){return h.Renderer(t,h.Util.Extend(e,r))},parse:function(t,e){return h.Parse(t,h.Util.Extend(e,r))},preload:function(t){return h.Preload(h.Util.Extend(t,r))},log:h.Util.log}},t.html2canvas.log=h.Util.log,t.html2canvas.Renderer={Canvas:n},h.Renderer.Canvas=function(t){function i(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}function o(t){if(-1===s.indexOf(t.arguments[0].src)){c.drawImage(t.arguments[0],0,0);try{c.getImageData(0,0,1,1)}catch(e){return l=a.createElement("canvas"),c=l.getContext("2d"),!1}s.push(t.arguments[0].src)}return!0}function r(e,n){switch(n.type){case"variable":e[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{e.fillStyle=e.createPattern(n.arguments[0],"repeat")}catch(r){u.log("html2canvas: Renderer: Error creating pattern",r.message)}break;case"drawShape":i(e,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!t.taintTest||t.taintTest&&o(n))&&e.drawImage.apply(e,n.arguments);break;default:e[n.name].apply(e,n.arguments)}}}t=t||{};var a=e,s=[],l=e.createElement("canvas"),c=l.getContext("2d"),u=h.Util,d=t.canvas||a.createElement("canvas");return function(t,e,i,o,a){var s,l,c,h=d.getContext("2d"),p=t.stack;return d.width=d.style.width=e.width||p.ctx.width,d.height=d.style.height=e.height||p.ctx.height,c=h.fillStyle,h.fillStyle=u.isTransparent(p.backgroundColor)&&e.background!==n?e.background:t.backgroundColor,h.fillRect(0,0,d.width,d.height),h.fillStyle=c,o.forEach(function(t){h.textBaseline="bottom",h.save(),t.transform.matrix&&(h.translate(t.transform.origin[0],t.transform.origin[1]),h.transform.apply(h,t.transform.matrix),h.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(h.beginPath(),h.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),h.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){r(h,t)}),h.restore()}),u.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(l=a.Util.Bounds(e.elements[0]),s=i.createElement("canvas"),s.width=Math.ceil(l.width),s.height=Math.ceil(l.height),h=s.getContext("2d"),h.drawImage(d,l.left,l.top,l.width,l.height,0,0,l.width,l.height),d=null,s):d}}}(window,document),hljs.initHighlightingOnLoad();var emoji=window.emojiParser,highlight=function(t,e,n){t.push(new Promise(function(t,i){try{n&&e.addClass("stylus");var o=e.text();if(-1!=o.indexOf("://"))return console.log("skip on hljs freeze word"),console.log(o),t();var r=hljs.highlightAuto(o);return e.html(r.value),t()}catch(a){return console.err(a),i(a)}}))},codeHighlight=function(t){var e=[];return t.find("pre code").not(".lang-math").each(function(){highlight(e,$(this))}),t.find("p code").not(".lang-math").each(function(){highlight(e,$(this),!0)}),t.find("li code").not(".lang-math").each(function(){highlight(e,$(this),!0)}),Promise.all(e)},processMathJax=function(t){return new Promise(function(e){MathJax.Hub.Queue(function(){return MathJax.Hub.Typeset(t),e()})})},processLink=function(t){return new Promise(function(e){if(t){var n=t;isString(t)&&(n=$(t)),target=n.find(".internallink")}else target=$(".internallink");return target.each(function(){var t=$(this).text().substring(1);console.log(t);var e='<a href="'+_CONTEXT+"/open.knowledge/view/"+t+'">';e+="#"+t,e+="</a>",$(this).html(e)}),e()})},decoration=function(t){return new Promise(function(e,n){return codeHighlight(t).then(function(){var e=emoji(t.html().trim(),_CONTEXT+"/bower/emoji-parser/emoji",{classes:"emoji-img"});return t.html(e),Promise.resolve()}).then(function(){return t.find("a.oembed").oembed(),Promise.resolve()}).then(function(){return showSlide(t),Promise.resolve()}).then(function(){return processLink(t)}).then(function(){t.find("a").each(function(){if($(this).attr("href").startsWith("#fn")){var t=$(this).attr("href"),e=$("#"==t||""==t?"html":t),n=e.offset().top;console.log(n),n-=80;var i=location.pathname+$(this).attr("href");$(this).attr("href",i),$(this).click(function(){var t=400;return console.log(n),$("body,html").animate({scrollTop:n},t,"swing"),!1})}})}).then(function(){return e()}).catch(function(t){return console.error(t),n(t)})})},processDecoration=function(t){isString(t)&&(t=$(t));var e=[];return t.each(function(t,n){var i=$(n);e.push(decoration(i))}),Promise.all(e)},doPreview=function(t,e,n,i){return parseMarkdown($(t).val(),$(e).val(),n,i)},parseMarkdown=function(t,e,n,i){return new Promise(function(o){$.post(_CONTEXT+"/open.knowledge/marked",{title:t,content:e},function(t){i&&$(i).html(t.title);var e='<div style="word-break:normal" id="content">',r=t.content;e+=r,e+="</div>";var a=$(n);return a.html(e),processDecoration(n).then(function(){return o()})})})},removeAddedFile=function(t){var e=_CONTEXT+"/protect.file/delete/"+t;$.ajax({type:"DELETE",url:e,success:function(){$.notify(_REMOVE_FILE,"info"),$("#file-"+t).remove()},error:function(){$.notify(_FAIL_REMOVE_FILE,"warn")}})};$(document).ready(function(){echo.init();var t=new Clipboard("#urlBtn");t.on("success",function(){$.notify(_MSG_COPIED,"success")}),setAutoComplete($("#comment")),$(".inner-page-link").click(function(){var t=500,e=$(this).attr("href"),n=$(e);if(n&&n.offset&&n.offset()){var i=n.offset().top;i-=100,$("html, body").animate({scrollTop:i},t,"swing")}return!1})});var addlike=function(t){var e=_CONTEXT+"/open.knowledge/like/"+t;$.ajax({type:"POST",url:e,success:function(t){console.log(t),$("#like_count").text(t.count),$.notify(LABEL_LIKE,"info")},error:function(t){403===t.status&&t.responseJSON&&$.notify(t.responseJSON.message,"warn")}})},addlikeComment=function(t){console.log(t);var e=_CONTEXT+"/open.knowledge/likecomment/"+t;$.ajax({type:"POST",url:e,success:function(e){console.log(e),$("#like_comment_count_"+t).text(e.count),$.notify(LABEL_LIKE,"info")},error:function(t){403===t.status&&t.responseJSON&&$.notify(t.responseJSON.message,"warn")}})};$(document).ready(function(){processDecoration("#content").then(function(){"-102"===$("#typeId").val()&&createPresentation($("#content"))}),processDecoration(".arrow_answer"),processDecoration(".arrow_question")}),$(document).ready(function(){});var collapse=function(t,e){e?($("#comment_"+t).addClass("hide"),$("#comment_collapse_"+t).removeClass("hide"),$("#collapse_on_"+t).addClass("hide"),$("#collapse_off_"+t).removeClass("hide")):($("#comment_"+t).removeClass("hide"),$("#comment_collapse_"+t).addClass("hide"),$("#collapse_on_"+t).removeClass("hide"),$("#collapse_off_"+t).addClass("hide"));var n=_CONTEXT+"/protect.knowledge/collapse/";$.ajax({type:"POST",url:n,data:"commentNo="+t+"&collapse="+e,scriptCharset:"utf-8",success:function(t){console.log(t),$.notify(t.message,"success")},error:function(){$.notify("[fail] collapse","warn")}})};$(document).ready(function(){$("#emojiPeopleModal").on("loaded.bs.modal",function(){emojiSelect("#emojiPeopleModal")}),$("#emojiNatureModal").on("loaded.bs.modal",function(){emojiSelect("#emojiNatureModal")}),$("#emojiObjectsModal").on("loaded.bs.modal",function(){emojiSelect("#emojiObjectsModal")}),$("#emojiPlacesModal").on("loaded.bs.modal",function(){emojiSelect("#emojiPlacesModal")}),$("#emojiSymbolsModal").on("loaded.bs.modal",function(){emojiSelect("#emojiSymbolsModal")})});var emojiSelect=function(t){$(t).find(".name").each(function(){$(this).click(function(){var e=" :"+$(this).text()+": ";insertAtCaret("#comment",e),$(t).modal("hide")})})};$(document).ready(function(){});var preview=function(){$.post(_CONTEXT+"/open.knowledge/marked",{title:"",content:$("#comment").val()},function(t){var e='<div class="question_Box">';e+='<div class="question_image">',e+='<img src="'+_CONTEXT+"/open.account/icon/"+$("#loginuser").val()+'" ',e+='alt="icon" width="64" height="64"/>',e+="</div>",e+='<div class="arrow_question">',e+='<div style="word-break:normal" id="content">';var n=t.content;e+=n,e+="</div>",e+="</div><!-- /.arrow_question -->",e+="</div><!-- /.question_Box -->";var i="#preview",o=$(i);o.html(e),processDecoration(i).then(function(){return processMathJax(i)})})},previewans=function(){$.post(_CONTEXT+"/open.knowledge/marked",{title:"",content:$("#comment").val()},function(t){var e='<div class="question_Box">';e+='<div class="answer_image">',e+='<img src="'+_CONTEXT+"/open.account/icon/"+$("#loginuser").val()+'" ',e+='alt="icon" width="64" height="64"/>',e+="</div>",e+='<div class="arrow_answer">',e+='<div style="word-break:normal" id="content">';var n=t.content;e+=n,e+="</div>",e+="</div>",e+="</div>";var i="#preview",o=$(i);o.html(e),processDecoration(i).then(function(){return processMathJax(i)})})};$(document).ready(function(){var t=_CONTEXT+"/protect.file/upload";$("#fileupload").fileupload({url:t,dataType:"json",autoUpload:!0,maxFileSize:5e6,dropZone:"#drop_target"}).on("fileuploaddone",function(t,e){uploadedFiles(e.result.files),setTimeout(function(){$("#progress").hide()},5e3)}).on("fileuploadprogressall",function(t,e){$("#progress").show();var n=parseInt(e.loaded/e.total*100,10);console.log(""+n+"%"),$(".progress .progress-bar").css("width",n+"%"),$(".progress .progress-bar").text(n+"%")}).on("fileuploadfail",function(t,e){if(e&&e.jqXHR&&e.jqXHR.responseJSON&&e.jqXHR.responseJSON.msg){var n=e.jqXHR.responseJSON.msg;$.each(e.files,function(t){var i='<div class="alert alert-warning alert-dismissible" role="alert">';i+='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>',i+="<strong>",i+='<i class="fa fa-remove"></i>&nbsp;',i+=e.files[t].name,i+="</strong>&nbsp;&nbsp;",i+=n,i+="</div>",$("#files").append(i),$.notify(_FAIL_UPLOAD,"warn")})}else console.log(t),console.log(e),$.notify("","warn")}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled"),$("#more_attach").click(function(){$(".downloadfile").each(function(){$(this).removeClass("hide"),$("#more_attach").addClass("hide")})})});var uploadedFiles=function(t){console.log(t),$.each(t,function(t,e){var n='<div class="filediv row" id="file-'+e.fileNo+'">';n+='<div class="file-image col-xs-1">',n+='<img src="'+e.thumbnailUrl+'" width="20"/>',n+="</div>",n+='<div class="file-label col-xs-6">',n+='<a href="'+e.url+'&amp;attachment=true">';var i=e.name;i.length>20&&(i=i.substring(0,17)+"..."),n+=i,n+="</a>",n+="</div>",n+='<input type="hidden" name="files" value="'+e.fileNo+'" />',n+='<div class="file-buttons col-xs-4">',"image"===e.type?(n+='<button type="button" class="btn btn-success btn-xs" onclick="setImagePath(\''+e.url+"', '"+e.name+"')\">",n+='<i class="fa fa-file-image-o"></i>&nbsp;'+_SET_IMAGE_LABEL,n+="</button><br/>"):"slide"===e.type&&(n+='<button type="button" class="btn btn-success btn-xs" onclick="setSlidePath(\''+e.fileNo+"', '"+e.name+"')\">",n+='<i class="fa fa-television"></i>&nbsp;'+_SET_SLIDE_LABEL,n+="</button><br/>"),n+='<button type="button" class="btn btn-danger btn-xs" onclick="removeAddedFile('+e.fileNo+')">',n+='<i class="fa fa-remove"></i>',n+="&nbsp;"+_DELETE_LABEL+"</button>",n+="</div>",n+="</div>",$("#files").append(n)}),$.notify(_UPLOADED,"success")},setImagePath=function(t,e){var n="\n!["+e+"]("+t+")\n";insertAtCaret("#comment",n)},setSlidePath=function(t){var e="[slide "+t+"]\n";insertAtCaret("#comment",e)};$(document).ready(function(){});var stockPage=0;$("#stockModal").on("show.bs.modal",function(){return getStockInfo()});var getStockInfoPrevious=function(){return stockPage--,0>stockPage&&(stockPage=0),getStockInfo()},getStockInfoNext=function(){return stockPage++,getStockInfo()},stocksInfo,getStockInfo=function(){var t=_CONTEXT+"/protect.stock/chooselist/"+stockPage,e=null;$("#knowledgeId")&&(e=$("#knowledgeId").val()),$("#stockSelect").html(""),$("#stockPage").text(stockPage+1),$.ajax({type:"GET",url:t,data:"knowledge_id="+e,success:function(t){console.log(t),stocksInfo=t;var e="";if(!t||0==t.length)return $("#stockLink").show(),$("#saveStockButton").prop("disabled",!0),void 0;$("#stockLink").hide(),$("#saveStockButton").prop("disabled",!1);for(var n=0;n<t.length;n++)e+='<div class="checkbox">',e+='<label><input type="checkbox" value="'+t[n].stockId+'" ',t[n].stocked&&(e+='checked="checked" '),e+=" />",e+=t[n].stockName+"</label>",e+="</div>";$("#stockSelect").html(e)},error:function(){$.notify("[fail] get stock info","warn")}})},saveStocks=function(t){var e=$("#stockComment").val();$("#stockSelect").find("input").each(function(){for(var t=0;t<stocksInfo.length;t++)if(stocksInfo[t].stockId==this.value){stocksInfo[t].stocked=this.checked,stocksInfo[t].description=e;break}});var n=_CONTEXT+"/protect.knowledge/stock/"+t;console.log(stocksInfo),$.ajax({type:"POST",url:n,dataType:"json",data:JSON.stringify(stocksInfo),contentType:"application/JSON",dataType:"JSON",scriptCharset:"utf-8",success:function(t){console.log(t),$.notify(t.message,"success"),$("#stockModal").modal("hide")},error:function(){$.notify("[fail] save stock info","warn"),$("#stockModal").modal("hide")}})},shownAgenda=!1,agenda,createAgenda=function(){console.log("createAgenda");var t=$("nav.navbar-fixed-top").outerHeight(!0),e=$("#toc"),n=!1;$(".markdown h1, .markdown h2, .markdown h3").each(function(){n=!0;var i=$(this).attr("id"),o=$(this).prop("tagName").toLowerCase(),r=$('<a href=""></a>');r.text("- "+$(this).text()),r.attr("href","#"+i),r.click(function(){return $("body, html").animate({scrollTop:$("#"+i).offset().top-t},500),!1});var a=$('<div class="toc-h toc-'+o+'"></div>');r.appendTo(a),e.append(a)}),n||e.html(_MSG_TOC_EMPTY),agenda=!0},showAgenda=function(){agenda||createAgenda(),shownAgenda?$("#ipop").fadeOut(100):$.ipop(),shownAgenda=!shownAgenda};!function(t){t.ipop=function(){var e,n,i=t("#buttonToc");e=i.offset().left,n=50,t("#ipop").css({top:n,left:e}).fadeIn(100),t("#ipop_close").click(function(){shownAgenda=!shownAgenda,t("#ipop").fadeOut(100)}),t("#ipop_title").mousedown(function(i){var o=i.pageX,r=i.pageY;return t(document).on("mousemove.ipop",function(i){return e+=i.pageX-o,n+=i.pageY-r,t("#ipop").css({top:n,left:e}),o=i.pageX,r=i.pageY,!1}).one("mouseup",function(){t(document).off("mousemove.ipop")}),!1})}}(jQuery),$(document).ready(function(){logging($("#typeId").val());var t=[],e=function(){$.ajax({url:_CONTEXT+"/open.event/participation/"+$("#knowledgeId").val(),type:"GET",timeout:1e4}).done(function(e){console.log(e),t=e.participations,e.status>0?($("#btnNonparticipation").removeClass("hide"),$("#btnParticipation").addClass("hide")):($("#btnParticipation").removeClass("hide"),$("#btnNonparticipation").addClass("hide"));var n=e.count+" / "+e.limit;$("#eventStatus").html(n)}).fail(function(t,e,n){handleErrorResponse(t,e,n)}).always(function(){$("#loading").addClass("hide")})};"-101"===$("#typeId").val()&&e(),$("#eventInfoLink").click(function(){var e="";if(0===t.length)e+="Empty";else{e+='<ul class="list-group">';for(var n=0;n<t.length;n++){var i=t[n];e+='<li class="list-group-item">',e+=1===i.status?'<span class="badge">'+_LABEL_STATUS_WAIT_CANCEL+"</span>":'<span class="badge">'+_LABEL_STATUS_PARTICIPANT+"</span>",e+=i.userName,e+="</li>"}e+="</ul>"}bootbox.dialog({title:_LABEL_PARTICIPANTS,message:e,closeButton:!0,buttons:{cancel:{label:"Close",className:"btn-default"}}})}),$("#btnParticipation").click(function(){$.ajax({url:_CONTEXT+"/protect.event/participation/"+$("#knowledgeId").val(),type:"PUT",timeout:1e4}).done(function(t){e(),"true"==t.value?$.notify(t.label,"success"):$.notify(t.label,"warn")}).fail(function(t,e,n){handleErrorResponse(t,e,n)}).always(function(){})}),$("#btnNonparticipation").click(function(){bootbox.confirm(_MSG_CONFIRM_CANCEL,function(t){t&&$.ajax({url:_CONTEXT+"/protect.event/nonparticipation/"+$("#knowledgeId").val(),type:"DELETE",timeout:1e4}).done(function(t){e(),$.notify(t.msg,"success")}).fail(function(t,e,n){handleErrorResponse(t,e,n)}).always(function(){})})})}),$(document).ready(function(){var t=function(){var t=moment();return"clip-"+t.format("YYYYMMDDHHmmss")+".png"},e=function(e){return function(n){var i,o,r;return n.clipboardData&&n.clipboardData.types&&1==n.clipboardData.types.length&&"Files"==n.clipboardData.types[0]?(i=n.clipboardData.items[0].getAsFile(),o=new FormData,o.append("files[]",i,t()),r=_CONTEXT+"/protect.file/upload",jQuery.ajax({type:"POST",url:r,contentType:!1,processData:!1,data:o,success:function(t){uploadedFiles(t.files);var n=$(e);writeImageLink(t,n)}}),void 0):!0}},n=document.querySelector("#content");n&&n.addEventListener("paste",e(n));var i=document.querySelector("#comment");i&&i.addEventListener("paste",e(i))});var writeImageLink=function(t,e){var n,i,e,o,r,a;0<t.files.length&&(n=t.files[0],i="!["+n.name+"]("+n.url+")",e.focus(),o=e.val(),r=e.get(0).selectionStart,a=r+i.length,e.val(o.substr(0,r)+i+o.substr(r)),e.get(0).setSelectionRange(a,a))},emojis=["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_nib","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","bug","broken_heart","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","moon","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz","black_medium_small_square","back","black_small_square","black_medium_square","white_medium_small_square","white_small_square","white_medium_square","sparkle","package"],emojisList=$.map(emojis,function(t,e){return{id:e,name:t}
}),setAutoComplete=function(t){t.atwho({at:":",displayTpl:"<li><img src='"+_CONTEXT+"/bower/emoji-parser/emoji/${name}.png' height='20' width='20'/> ${name} </li>",insertTpl:":${name}:",data:emojisList}).atwho({at:"#",displayTpl:function(t){return"<li> #"+t.knowledgeId+"&nbsp;<small>"+t.title+"</small></li>"},insertTpl:function(t){return"#"+t.knowledgeId},searchKey:"knowledgeId",callbacks:{remoteFilter:function(t,e){$.getJSON(_CONTEXT+"/open.knowledge/items",{q:t},function(t){e(t.items)})}}})};$(document).ready(function(){var t=function(t){var e="";return e+=t.itemValue},e=function(t){var e="<pre>";return e+=t.itemValue,e+="</pre>"},n=function(t){var e="",n="";return t.itemValue&&(n=t.itemValue),e+="<h4>"+t.itemName+": ",e+='<a href="'+escapeLink(n)+'" target="_blank" >'+n+"</a></h4>"},i=function(t){var e="";if(t.choices)for(var n=0;n<t.choices.length;n++){var i=t.choices[n];e+=i.choiceValue==t.itemValue?'<i class="fa fa-dot-circle-o" aria-hidden="true"></i>':'<i class="fa fa-circle-o" aria-hidden="true"></i>',e+="&nbsp;"+i.choiceLabel+"&nbsp;&nbsp;&nbsp;"}return e},o=function(t){var e="";if(t.choices)for(var n=0;n<t.choices.length;n++){var i=t.choices[n];if(t.itemValue)for(var o=t.itemValue.split(","),r=!1,a=0;a<o.length;a++)if(i.choiceValue==o[a].trim()){r=!0;break}e+=r?'<i class="fa fa-check-square-o" aria-hidden="true"></i>':'<i class="fa fa-square-o" aria-hidden="true"></i>',e+="&nbsp;"+i.choiceLabel+"&nbsp;&nbsp;&nbsp;"}return e},r=function(r){if(r.items&&r.items.length>0)for(var a=0;a<r.items.length;a++){var s=r.items[a],l="";a>0&&(l+="<br/>"),-99==r.typeId?l+=n(s):(l+=s.itemName+": ",l+=1===s.itemType?e(s):10===s.itemType?i(s):11===s.itemType?o(s):t(s)),$("#template_view_items").append(l),$("#template_items_area").show()}};document.__add_Template_Item=r}),$(document).ready(function(){var t=function(){var t=$("#typeId").val(),e=_CONTEXT+"/open.knowledge/template",n=null;$("#knowledgeId")&&(n=$("#knowledgeId").val()),$.ajax({type:"GET",url:e,data:"type_id="+t+"&knowledge_id="+n,success:function(t){var e=t,n='<i class="fa '+e.typeIcon+'"></i>&nbsp;'+e.typeName;$("#template").html(n),document.__add_Template_Item(t)},error:function(){$.notify("[fail] get template info","warn")}})};t()}),$(document).ready(function(){var t=[],e=function(t){var e='<input type="text" class="form-control" name="item_'+t.itemNo,n="";return t.itemValue&&(n=t.itemValue),e+='" value="'+n+'" />'},n=function(t){var e='<textarea class="form-control" name="item_'+t.itemNo+'" >',n="";return t.itemValue&&(n=t.itemValue),e+=n,e+="</textarea>"},i=function(t){var e='<input type="number" class="form-control" name="item_'+t.itemNo,n="";return t.itemValue&&(n=t.itemValue),e+='" value="'+n+'" min="0" step="1"/>'},o=function(t){var e="";if(t.choices){e+="<br/>";for(var n=0;n<t.choices.length;n++){var i=t.choices[n];e+='<label class="radio-inline"><input type="radio" class="" name="item_'+t.itemNo,e+='" value="'+i.choiceValue+'" ',i.choiceValue==t.itemValue&&(e+='checked="checked" '),e+="/> &nbsp;"+i.choiceLabel+"</label><br/>"}}return e},r=function(t){var e="";if(t.choices){e+="<br/>";for(var n=0;n<t.choices.length;n++){var i=t.choices[n];if(e+='<label class="checkbox-inline"><input type="checkbox" class="" name="item_'+t.itemNo,e+='" value="'+i.choiceValue+'" ',t.itemValue)for(var o=t.itemValue.split(","),r=0;r<o.length;r++)if(i.choiceValue==o[r].trim()){e+='checked="checked" ';break}e+="/> &nbsp;"+i.choiceLabel+"</label><br/>"}}return e},a=function(t){var e='<div class="input-group">';e+='<input type="text" class="form-control datepicker" name="item_'+t.itemNo;var n="";return t.itemValue&&(n=t.itemValue),e+='" value="'+n+'" />',e+='<span class="input-group-addon">',e+='<span class="fa fa-calendar"></span>',e+="</span>",e+="</div>"},s=function(t){var e='<div class="input-group clockpicker" data-placement="bottom" data-align="top" data-autoclose="true">';e+='<input type="text" class="form-control" name="item_'+t.itemNo;var n="";return t.itemValue&&(n=t.itemValue),e+='" value="'+n+'" />',e+='<span class="input-group-addon">',e+='<span class="fa fa-clock-o"></span>',e+="</span>",e+="</div>"},l=function(t){var e='<div class="input-group" data-placement="bottom" data-align="top" data-autoclose="true">';e+='<input type="text" class="form-control timezone" name="item_'+t.itemNo;var n="";if(t.itemValue)n=t.itemValue;else{var i=jstz.determine();n=i.name(),logging(n)}return e+='" value="'+n+'" />',e+='<span class="input-group-addon">',e+='<span class="fa fa-globe"></span>',e+="</span>",e+="</div>"},c="",u=function(u){$("#template_msg").text(u.description),$("#template_info").removeClass("hide"),$("#template_info").addClass("show");var h=$("#content").val();h?c.replace(/\r?\n/g,"")==h.replace(/\r?\n/g,"")&&($("#content").val(u.initialValue?u.initialValue:""),c=u.initialValue):($("#content").val(u.initialValue),c=u.initialValue),$("#template_items").html("");var d=!1,p=!1,f=!1;if(u.items&&u.items.length>0)for(var m=0;m<u.items.length;m++){var g=u.items[m],v='<div class="form-group"><label for="item_'+g.itemNo+'">'+g.itemName+"</label>";g.description&&(v+='<div class="item_description">'+g.description+"</div>"),1===g.itemType?v+=n(g):2===g.itemType?v+=i(g):10===g.itemType?v+=o(g):11===g.itemType?v+=r(g):20===g.itemType?(v+=a(g),d=!0):21===g.itemType?(v+=s(g),p=!0):22===g.itemType?(v+=l(g),f=!0):v+=e(g),v+="</div>",$("#template_items").append(v)}if(d){var y="en";_LANG&&(y=_LANG),$(".datepicker").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,language:y})}p&&$(".clockpicker").clockpicker().find("input").change(function(){logging(this.value)}),f&&Promise.try(function(){return t.length>0?Promise.resolve():new Promise(function(e,n){$.ajax({url:_CONTEXT+"/bower/moment-timezone/data/meta/latest.json",type:"GET",timeout:1e4}).done(function(n){for(var i in n.zones)t.push(i);return e()}).fail(function(t,e,i){return n(i)})})}).then(function(){$(".timezone").typeahead({source:t})})};document.__add_Template_Edit_Item=u}),$(document).ready(function(){var t=$("#knowledgeId").val();$.ajax({type:"GET",url:_CONTEXT+"/open.survey/load/"+t}).done(function(t){console.log(t),!t.msg&&t.exist&&($("#modalAnswerSurveyLabel").text(t.title),$("#surveyDescription").text(t.description),document.__add_Template_Edit_Item(t),_LOGIN_USER_ID?$("#btnAnswerSurvey").removeClass("hide"):t.loginNecessary?$("#btnLoginToAnswerSurvey").removeClass("hide"):$("#btnAnswerSurvey").removeClass("hide"))}).fail(function(t){console.log(t)}),$("#saveSurveyButton").click(function(){$("#answerForm").submit()}),$("#answerForm").submit(function(t){logging("submit. "+$("#typeId").val());var e=$(this);t.preventDefault();var n=e.find("button");return n.attr("disabled",!0),$.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),timeout:1e4}).done(function(t){console.log(t),$.notify(t.message,"info"),$("#answerId").val(t.result),$("#modalAnswerSurvey").modal("hide")}).fail(function(t,e,n){handleErrorResponse(t,e,n)}).always(function(){n.attr("disabled",!1)}),!1})});var indexMap={},full=!1,slideCount=0,requestFullscreen=function(t){if(full)document.webkitCancelFullScreen?(document.webkitCancelFullScreen(),full=!1):document.mozCancelFullScreen?(document.mozCancelFullScreen(),full=!1):document.msExitFullscreen?(document.msExitFullscreen(),full=!1):document.exitFullscreen&&(document.exitFullscreen(),full=!1);else{var e=document.getElementById(t);if(e.requestFullscreen)e.requestFullscreen(),full=!0;else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen(),full=!0;else if(e.mozRequestFullScreen)e.mozRequestFullScreen(),full=!0;else{if(!e.msRequestFullscreen)return $.notify("Fullscreen view is not supported.","warn"),void 0;e.msRequestFullscreen(),full=!0}}},showSlide=function(t){var e,n=_CONTEXT+"/open.file/slide/";if(t){var i=t;isString(t)&&(i=$(t)),e=i.find(".slideshow")}else e=$(".slideshow");e.each(function(){var t=$(this).attr("slide"),e=$(this).attr("transition"),i=$(this);if(t){slideCount++;var o="slide-area-"+slideCount;indexMap[o]=1,$.ajax({type:"GET",url:n+t,success:function(n){if(n.files&&n.files.length>0){var r,a='<div class="slideshow-area" id="'+o+'">';for(a+='<div class="slideshow-container">',r=0;r<n.files.length;r++)a+='<div class="mySlides',e&&(a+=" animated "+e),a+='">',a+='<img src="'+_CONTEXT+'/images/loader.gif" lagy="'+_CONTEXT+"/open.file/slide/"+n.fileNo+"/",a+=n.files[r]+'" alt="slide-'+r+'" class="slide-image slide-image-'+t+'" />',a+="</div>";if(a+="</div><br/>",a+='<div class="slideshow-control">',a+='<a class="prev" onclick="plusSlides(-1, \''+o+"')\">&#10094; prev</a>",a+='<a class="next" onclick="plusSlides(1, \''+o+"')\">next &#10095;</a>",a+='<div style="text-align:center">',a+='<div class="numbertext"><span class="current">1</span> / '+n.files.length,a+="&nbsp;&nbsp;&nbsp;<a onclick=\"requestFullscreen('"+o+"');\">",a+='<i class="full fa fa-television fa-2x" aria-hidden="true"></i></a></div>',n.files.length<60){for(a+='<div class="dotArea">',r=0;r<n.files.length;r++)a+='<span class="dot" onclick="currentSlide('+(r+1)+", '"+o+"')\"></span> ";a+="</div>"}a+="</div></div></div>",i.html(a),showSlides(indexMap[o],o)}},error:function(t,e){console.log(e)}})}})};$(document).on({mouseenter:function(){var t=$(this).attr("id");$(window).on("keydown",function(e){e.preventDefault(),37==e.keyCode&&plusSlides(-1,t),39==e.keyCode&&plusSlides(1,t)})},mouseleave:function(){$(window).off("keydown")}},".slideshow-area");var setHeight=function(){var t=$("#presentation").width(),e=9*t/16;$(".markdownSlide").height(e)},getOptions=function(t){var e={},n=!0,i={};e.general=i;var o=0;return t.children().filter(function(){return"hr"==this.tagName.toLowerCase()?!0:"p"==this.tagName.toLowerCase()&&$(this).find("var").length>0?!0:!1}).each(function(t,r){"hr"==r.tagName.toLowerCase()?(n||(n=!1),o++,i={},e[o]=i):"p"==r.tagName.toLowerCase()&&$(r).find("var").each(function(t,e){$(e).attr("transition")&&(i.transition=$(e).attr("transition")),$(e).attr("centered")&&(i.centered=$(e).attr("centered"))})}),e},createSection=function(t,e){console.log(t);var n='<div class="mySlides markdownSlide';t[e]&&t[e].transition?n+=" animated "+t[e].transition:t.general.transition&&(n+=" animated "+t.general.transition),n+='"></div>';var i=$(n);return i},appendContent=function(t,e,n){var i=$("<div><div>");return t.append(i),(0===n||e[n]&&e[n].centered)&&i.addClass("centered"),i},slideLength,createPresentation=function(t){return Promise.try(function(){$(window).resize(function(){setHeight()}),logging("createPresentation");var e=$("#presentationArea"),n=getOptions(t),i=!1,o=0,r=[],a=createSection(n),s=appendContent(a,n,o);t.children().each(function(t,e){"hr"==e.tagName.toLowerCase()?(r.push(a),o++,a=createSection(n,o),s=appendContent(a,n,o),i=!1):(s.append($(e).clone()),i=!0)}),i&&r.push(a),slideLength=r.length;var l="presentation";indexMap[l]=1;var c='<div class="slideshow-area" id="'+l+'">';if(c+='<div class="slideshow-container" id="sheets"></div>',c+="<br/>",c+='<div class="slideshow-control">',c+='<a class="prev" onclick="plusSlides(-1, \''+l+"')\">&#10094; prev</a>",c+='<a class="next" onclick="plusSlides(1, \''+l+"')\">next &#10095;</a>",c+='<div style="text-align:center">',c+='<div class="numbertext"><span class="current">1</span> / '+slideLength,c+="&nbsp;&nbsp;&nbsp;<a onclick=\"requestFullscreen('"+l+"');\">",c+='<i class="full fa fa-television fa-2x" aria-hidden="true"></i></a>',c+="</div>",60>slideLength){c+='<div class="dotArea">';for(var u=0;slideLength>u;u++)c+='<span class="dot" onclick="currentSlide('+(u+1)+", '"+l+"')\"></span> ";c+="</div>"}c+="</div></div></div>",e.html(c),r.forEach(function(t){$("#sheets").append(t)}),showSlides(indexMap[l],l),setHeight()})},loadCanvus=function(t,e,n){return new Promise(function(i){setTimeout(function(){var o=document.getElementById("sheets");html2canvas(o,{onrendered:function(o){var r=o.toDataURL("image/png");return t.addImage(r,"png",0,0,e,n),i()}})},50)})},downloadPdf=function(){var t=$("#sheets").width(),e=$("#sheets").height();$("#createPdfProgress").removeClass("hide");var n=new jsPDF("landscape","mm",[t,e]);loadCanvus(n,t,e).then(function(){$("#createPdfProgress").addClass("hide"),n.save("presentation.pdf")})};